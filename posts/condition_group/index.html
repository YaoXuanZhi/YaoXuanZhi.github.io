<!DOCTYPE html>
<html itemscope itemtype="http://schema.org/WebPage" lang="zh-cn">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
    <meta name="robots" content="noodp" />
    <title>简易的条件组分词器 - YaoXuanZhi&#39;s Blog</title><meta name="author" content="YaoXuanZhi">
<meta name="author-link" content="https://github.com/YaoXuanZhi">
<meta name="description" content="在游戏项目的Gameplay开发中，条件配置是很大一项配置内容，而且经常变更，一个通用且可维护性强的条件支持机制就显得尤为重要了，这里提供了一种程序只需要为每类条件做机制支持，最终条件配置交由策划童鞋自行组合的配置方式，而且能够很好兼容excel、csv等配置" /><meta name="keywords" content='条件组判断, 条件判断, 逻辑符运算' /><meta itemprop="name" content="简易的条件组分词器">
<meta itemprop="description" content="在游戏项目的Gameplay开发中，条件配置是很大一项配置内容，而且经常变更，一个通用且可维护性强的条件支持机制就显得尤为重要了，这里提供了一种程序只需要为每类条件做机制支持，最终条件配置交由策划童鞋自行组合的配置方式，而且能够很好兼容excel、csv等配置"><meta itemprop="datePublished" content="2021-08-25T00:00:00+00:00" />
<meta itemprop="dateModified" content="2024-03-13T13:34:34+08:00" />
<meta itemprop="wordCount" content="3038">
<meta itemprop="keywords" content="条件组判断,条件判断,逻辑符运算," /><meta property="og:title" content="简易的条件组分词器" />
<meta property="og:description" content="在游戏项目的Gameplay开发中，条件配置是很大一项配置内容，而且经常变更，一个通用且可维护性强的条件支持机制就显得尤为重要了，这里提供了一种程序只需要为每类条件做机制支持，最终条件配置交由策划童鞋自行组合的配置方式，而且能够很好兼容excel、csv等配置" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/posts/condition_group/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-08-25T00:00:00+00:00" />
<meta property="article:modified_time" content="2024-03-13T13:34:34+08:00" />

<meta name="twitter:card" content="summary"/><meta name="twitter:title" content="简易的条件组分词器"/>
<meta name="twitter:description" content="在游戏项目的Gameplay开发中，条件配置是很大一项配置内容，而且经常变更，一个通用且可维护性强的条件支持机制就显得尤为重要了，这里提供了一种程序只需要为每类条件做机制支持，最终条件配置交由策划童鞋自行组合的配置方式，而且能够很好兼容excel、csv等配置"/>
<meta name="application-name" content="Hugo FixIt Blog">
<meta name="apple-mobile-web-app-title" content="Hugo FixIt Blog"><meta name="theme-color" data-light="#f8f8f8" data-dark="#252627" content="#f8f8f8"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="canonical" href="http://localhost:1313/posts/condition_group/" /><link rel="prev" href="http://localhost:1313/posts/improve_msys2/" /><link rel="next" href="http://localhost:1313/posts/ai_writer/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="/lib/fontawesome-free/all.min.css" as="style" onload="this.removeAttribute('onload');this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"></noscript><link rel="preload" href="/lib/animate/animate.min.css" as="style" onload="this.removeAttribute('onload');this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/lib/animate/animate.min.css"></noscript><script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "简易的条件组分词器",
    "inLanguage": "zh-cn",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "http:\/\/localhost:1313\/posts\/condition_group\/"
    },"genre": "posts","keywords": "条件组判断, 条件判断, 逻辑符运算","wordcount":  3038 ,
    "url": "http:\/\/localhost:1313\/posts\/condition_group\/","datePublished": "2021-08-25T00:00:00+00:00","dateModified": "2024-03-13T13:34:34+08:00","publisher": {
      "@type": "Organization",
      "name": ""},"author": {
        "@type": "Person",
        "name": "YaoXuanZhi"
      },"description": ""
  }
  </script></head>
  <body data-header-desktop="sticky" data-header-mobile="auto"><script>(window.localStorage?.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('dark' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'dark' === 'dark')) && document.body.setAttribute('data-theme', 'dark');</script><div class="wrapper" data-page-style="normal"><header class="desktop animate__faster" id="header-desktop">
  <div class="header-wrapper">
    <div class="header-title">
      <a href="/" title="YaoXuanZhi&#39;s Blog"><img loading="lazy" src="/assets/logo.svg" alt="YaoXuanZhi&#39;s Blog" data-title="YaoXuanZhi&#39;s Blog" class="logo" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/><span class="header-title-text">YaoXuanZhi&#39;s Blog</span></a><span class="header-subtitle"></span></div>
    <nav>
      <ul class="menu"><li class="menu-item">
              <a
                class="menu-link"
                href="/archives/"
                
                
              ><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden="true"></i> 归档</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/categories/"
                
                
              ><i class="fa-solid fa-folder-tree fa-fw fa-sm" aria-hidden="true"></i> 分类</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/tags/"
                
                
              ><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden="true"></i> 标签</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/abouts/"
                
                
              ><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden="true"></i> 关于</a></li><li class="menu-item delimiter"></li><li class="menu-item search" id="search-desktop">
            <input type="text" placeholder="搜索文章标题或内容……" id="search-input-desktop">
            <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
              <i class="fa-solid fa-search fa-fw" aria-hidden="true"></i>
            </a>
            <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="清空">
              <i class="fa-solid fa-times-circle fa-fw" aria-hidden="true"></i>
            </a>
            <span class="search-button search-loading" id="search-loading-desktop">
              <i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
            </span>
          </li><li class="menu-item theme-switch" title="切换主题">
          <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
        </li></ul>
    </nav>
  </div>
</header><header class="mobile animate__faster" id="header-mobile">
  <div class="header-container">
    <div class="header-wrapper">
      <div class="header-title">
        <a href="/" title="YaoXuanZhi&#39;s Blog"><img loading="lazy" src="/assets/logo.svg" alt="/assets/logo.svg" data-title="/assets/logo.svg" class="logo" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/><span class="header-title-text">YaoXuanZhi&#39;s Blog</span></a><span class="header-subtitle"></span></div>
      <div class="menu-toggle" id="menu-toggle-mobile">
        <span></span><span></span><span></span>
      </div>
    </div>
    <nav>
      <ul class="menu" id="menu-mobile"><li class="search-wrapper">
            <div class="search mobile" id="search-mobile">
              <input type="text" placeholder="搜索文章标题或内容……" id="search-input-mobile">
              <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                <i class="fa-solid fa-search fa-fw" aria-hidden="true"></i>
              </a>
              <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="清空">
                <i class="fa-solid fa-times-circle fa-fw" aria-hidden="true"></i>
              </a>
              <span class="search-button search-loading" id="search-loading-mobile">
                <i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
              </span>
            </div>
            <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
              取消
            </a>
          </li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/archives/"
                  
                  
                ><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden="true"></i> 归档</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/categories/"
                  
                  
                ><i class="fa-solid fa-folder-tree fa-fw fa-sm" aria-hidden="true"></i> 分类</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/tags/"
                  
                  
                ><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden="true"></i> 标签</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/abouts/"
                  
                  
                ><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden="true"></i> 关于</a></li><li class="menu-item menu-system">
          <span class="menu-system-item theme-switch" title="切换主题"><i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i></span></li>
      </ul>
    </nav>
  </div>
</header><div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
  </div>
  <div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
  </div><main class="container"><aside class="aside-collection animate__animated animate__fadeIn animate__faster" aria-label="合集"></aside>

  <article class="page single">
    <div class="header"><h1 class="single-title animate__animated animate__flipInX"><span>简易的条件组分词器</span>
      </h1></div><div class="post-meta">
      <div class="post-meta-line"><span class="post-author"><a href="https://github.com/YaoXuanZhi" title="作者"target="_blank" rel="external nofollow noopener noreferrer author" class="author"><img loading="lazy" src="/assets/avatar.jpg" alt="YaoXuanZhi" data-title="YaoXuanZhi" class="avatar" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/>&nbsp;YaoXuanZhi</a></span><span class="post-included-in">&nbsp;收录于 <a href="/categories/%E4%BB%A3%E7%A0%81%E5%BA%93/" class="post-category" title="分类 - 代码库"><i class="fa-regular fa-folder fa-fw" aria-hidden="true"></i> 代码库</a></span></div><div class="post-meta-line"><span title="发布于 2021-08-25 00:00:00"><i class="fa-solid fa-calendar-days fa-fw me-1" aria-hidden="true"></i><time datetime="2021-08-25">2021-08-25</time></span>&nbsp;<span title="3038 字"><i class="fa-solid fa-pencil-alt fa-fw me-1" aria-hidden="true"></i>约 3100 字</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw me-1" aria-hidden="true"></i>预计阅读 7 分钟</span>&nbsp;</div>
    </div><div class="details toc" id="toc-static" data-kept="false">
        <div class="details-summary toc-title">
          <span>目录</span>
          <span><i class="details-icon fa-solid fa-angle-right" aria-hidden="true"></i></span>
        </div>
        <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#前言">前言</a></li>
    <li><a href="#需求分析">需求分析</a>
      <ul>
        <li><a href="#配置表设计">配置表设计</a></li>
      </ul>
    </li>
    <li><a href="#程序设计">程序设计</a>
      <ul>
        <li><a href="#功能实现">功能实现</a></li>
        <li><a href="#参考资料">参考资料</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
      </div><div class="content" id="content"><p>在游戏项目的Gameplay开发中，条件配置是很大一项配置内容，而且经常变更，一个通用且可维护性强的条件支持机制就显得尤为重要了，这里提供了一种程序只需要为每类条件做机制支持，最终条件配置交由策划童鞋自行组合的配置方式，而且能够很好兼容excel、csv等配置</p>
<a href="https://github.com/YaoXuanZhi/condition_group" title="documentation of FixIt Theme"target="_blank" rel="external nofollow noopener noreferrer" class="card-link"><span class="cl-backdrop" style="--cl-bg-url: url(/images/fixit.min.svg);"></span>
    <span class="cl-content">
      <span class="cl-text">
        <span class="cl-title">简易的条件组分词器</span>
        <span class="cl-meta">
          <svg class="cl-icon-link" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16"><path d="M574 665.4c-3.1-3.1-8.2-3.1-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8c-3.1-3.1-8.2-3.1-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zM832.6 191.4c-84.6-84.6-221.5-84.6-306 0L410.3 307.6c-3.1 3.1-3.1 8.2 0 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6c-3.1 3.1-3.1 8.2 0 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1z" fill="#a9a9b3"></path><path d="M610.1 372.3c-3.1-3.1-8.2-3.1-11.3 0L372.3 598.7c-3.1 3.1-3.1 8.2 0 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z" fill="#a9a9b3"></path></svg>
          <span class="cl-url">https://github.com/YaoXuanZhi/condition_group</span>
        </span>
      </span><svg class="cl-icon-globe" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="64" height="64"><path d="M960 512c0 249.408-203.2 448-448 448-244.778667 0-448-198.592-448-448S262.592 64 512 64s448 198.592 448 448" fill="#2196F3"></path><path d="M507.52 718.08c0-8.96-4.48-13.44-13.44-17.92-26.88-8.96-53.76-8.96-76.16-31.381333-4.48-8.96-4.48-17.92-8.96-26.88-8.96-8.96-31.36-13.44-44.8-17.92h-89.6c-13.44-4.48-22.4-22.4-31.36-35.84 0-4.48 0-13.461333-8.96-13.461334-8.96-4.458667-17.92 4.501333-26.88 0-4.48-4.458667-4.48-8.96-4.48-13.418666 0-13.461333 8.96-26.901333 17.92-35.861334 13.44-8.96 26.88 4.48 40.32 4.48 4.48 0 4.48 0 8.96 4.48 13.44 4.48 17.92 22.4 17.92 35.861334v8.96c0 4.48 4.48 4.48 8.96 4.48 4.48-22.4 4.48-44.821333 8.96-67.2 0-26.88 26.88-53.781333 49.28-62.72 8.96-4.458667 13.44 4.501333 22.4 0 26.88-8.96 94.08-35.84 80.64-71.658667-8.96-31.381333-35.84-62.698667-71.68-58.24-8.96 4.501333-13.44 8.96-22.4 13.461333-13.44 8.96-40.32 35.84-53.76 35.84-22.4-4.48-22.4-35.84-17.92-49.301333 4.48-17.92 44.8-76.138667 71.68-67.178667l17.92 17.92c8.96 4.48 22.4 4.48 35.84 4.48 4.48 0 8.96 0 13.44-4.48 4.48-4.48 4.48-4.48 4.48-8.96 0-13.44-13.44-26.901333-22.4-35.861333s-22.4-17.92-35.84-22.378667c-44.8-13.461333-116.48 4.458667-152.32 35.84-35.84 31.36-62.72 85.12-80.64 129.92-8.96 26.88-17.92 62.698667-22.4 94.08-4.48 22.4-8.96 40.32 4.48 62.698667 13.44 26.88 40.32 53.781333 67.2 71.68 17.92 13.44 53.76 13.44 71.68 35.84 13.44 17.941333 8.96 40.32 8.96 62.72 0 26.88 17.92 49.28 26.88 71.658667 4.48 13.461333 8.96 31.381333 13.44 44.821333 0 4.48 4.48 31.36 4.48 35.84 26.88 13.44 49.28 26.901333 80.64 35.861333 4.48 0 22.4-26.901333 22.4-31.381333 13.44-13.44 22.4-31.36 35.84-40.32 8.96-4.48 17.92-8.96 26.88-17.941333 8.96-8.96 13.44-26.88 17.92-40.32 4.48-8.938667 8.96-26.858667 4.48-40.298667M516.48 305.92c4.48 0 8.96-4.48 17.92-8.96 13.44-8.96 26.901333-22.4 40.32-31.36 13.461333-8.96 26.901333-22.4 35.861333-31.36 13.44-8.96 22.4-26.88 26.88-40.341333 4.48-8.96 17.941333-26.88 13.44-40.32-4.48-8.96-26.88-13.44-35.84-17.92C579.2 126.698667 547.84 122.24 512 122.24c-13.44 0-31.36 4.458667-35.84 17.92-4.48 22.4 13.44 17.92 31.36 22.4 0 0 4.48 35.84 4.48 40.32 4.48 22.421333-8.96 35.84-8.96 58.24 0 13.44 0 35.84 8.96 44.8h4.48zM892.8 619.52c4.501333-8.96 4.501333-22.4 8.96-31.36 4.501333-22.421333 4.501333-44.8 4.501333-67.2 0-44.8-4.501333-89.578667-17.92-129.92-8.96-13.44-13.461333-26.88-17.941333-40.341333-8.96-22.378667-22.4-44.8-40.32-62.698667-17.92-22.4-40.341333-85.12-80.64-67.2-13.44 4.501333-22.4 22.421333-31.36 31.381333l-26.88 40.32c-4.501333 4.48-8.96 13.44-4.501333 17.92 0 4.48 4.501333 4.48 8.96 4.48 8.96 4.501333 13.461333 4.501333 22.421333 8.96 4.48 0 8.96 4.501333 4.48 8.96 0 0 0 4.501333-4.48 4.501334-22.421333 22.4-44.8 40.32-67.2 62.698666-4.48 4.48-8.96 13.44-8.96 17.92s4.48 4.48 4.48 8.96c0 4.501333-4.48 4.501333-8.96 8.96-8.96 4.501333-17.92 8.96-22.4 13.461334-4.48 8.96 0 22.4-4.48 31.36-4.48 22.4-17.941333 40.32-26.901333 62.72-8.96 13.418667-13.418667 26.88-22.378667 40.32 0 17.92-4.501333 31.36 4.458667 44.8 22.421333 31.36 62.72 13.44 94.08 26.901333 8.96 4.458667 17.92 4.458667 22.421333 13.418667 13.418667 13.461333 13.418667 35.861333 17.92 49.301333 4.458667 17.92 8.96 35.84 17.92 53.76 4.48 22.421333 13.44 44.821333 17.92 62.72 40.341333-31.36 76.16-67.178667 103.04-112 26.88-31.424 40.341333-67.242667 53.76-103.104" fill="#CDDC39"></path></svg></span></a>
<h2 id="前言" class="heading-element">
  <a href="#%e5%89%8d%e8%a8%80" class="heading-mark"></a>前言</h2><p>在游戏业务开发中，我们经常会遇到策划童鞋对各种系统开启、奖励发放、任务触发&amp;完成、成就事件达成等等条件配置的修改，条件参数配置可能是一条或者多条，相互之间还可能是各种组合关系，怎么设计配置表让策划去配置这些复杂的组合条件和在程序里便捷地支持它们非常重要，设计不好的配置表，和拓展性较差的功能设计能让模块维护者随着策划配置的修改而疲于奔命</p>
<h2 id="需求分析" class="heading-element">
  <a href="#%e9%9c%80%e6%b1%82%e5%88%86%e6%9e%90" class="heading-mark"></a>需求分析</h2><p>策划童鞋设计一个功能开启需求，并且罗列了一些例子，如下所示：</p>
<table>
<thead>
<tr>
<th style="text-align:center">系统功能名</th>
<th style="text-align:center">开启条件</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">武器系统</td>
<td style="text-align:center">玩家等级达到5级</td>
</tr>
<tr>
<td style="text-align:center">坐骑系统</td>
<td style="text-align:center">玩家等级达到15级</td>
</tr>
<tr>
<td style="text-align:center">天赋系统</td>
<td style="text-align:center">武器系统升到10级【且】开启了坐骑系统</td>
</tr>
<tr>
<td style="text-align:center">聊天系统</td>
<td style="text-align:center">玩家等级达到30级【且】充值过</td>
</tr>
<tr>
<td style="text-align:center">公会系统</td>
<td style="text-align:center">玩家等级达到100级【或】累计登录30天</td>
</tr>
</tbody>
</table>
<p>上述这些条件又应该是怎么配置到配置表上呢，比如在excel表上怎么配置这些条件呢</p>
<h3 id="配置表设计" class="heading-element">
  <a href="#%e9%85%8d%e7%bd%ae%e8%a1%a8%e8%ae%be%e8%ae%a1" class="heading-mark"></a>配置表设计</h3><p>将罗列的开启条件进行整理，如下所示：</p>
<p>配置格式设计如下：<code>Type-Param1-Param2-Param3</code></p>
<table>
<thead>
<tr>
<th style="text-align:center">Type(条件类型)</th>
<th style="text-align:center">Desc(描述)</th>
<th style="text-align:center">Template(模板)</th>
<th style="text-align:center">Example(示例)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">is_system_open</td>
<td style="text-align:center">系统A是否开启</td>
<td style="text-align:center">is_system_open-system_id</td>
<td style="text-align:center">武器系统是否开启:<code>is_system_open-weapon_sys</code></td>
</tr>
<tr>
<td style="text-align:center">system_level</td>
<td style="text-align:center">系统A达到B等级</td>
<td style="text-align:center">system_level-system_id-need_level</td>
<td style="text-align:center">武器系统是否达到10级: <code>system_level-weapon_sys-10</code></td>
</tr>
<tr>
<td style="text-align:center">player_level</td>
<td style="text-align:center">玩家达到A等级</td>
<td style="text-align:center">player_level-need_level</td>
<td style="text-align:center">玩家是否达到10级：<code>player_level-10</code></td>
</tr>
<tr>
<td style="text-align:center">acc_charge_total</td>
<td style="text-align:center">累计充值总额达到A</td>
<td style="text-align:center">acc_charge_total-need_total</td>
<td style="text-align:center">是否累计充值总额已达1000元：<code>acc_charge_total-1000</code></td>
</tr>
<tr>
<td style="text-align:center">acc_login_days</td>
<td style="text-align:center">累计登录天数达到A</td>
<td style="text-align:center">acc_login_days-need_days</td>
<td style="text-align:center">是否累计登录了30天：<code>acc_login_days-30</code></td>
</tr>
</tbody>
</table>
<p>各个具体条件已经拆分好了，那么怎么表述它的【且】和【或】关系呢，在此，引入了另外两个特殊符号，如下所示：</p>
<table>
<thead>
<tr>
<th style="text-align:center">符号</th>
<th style="text-align:center">作用</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>&amp;&amp;</code></td>
<td style="text-align:center">完成<code>条件A</code>和<code>条件B</code>的且运算</td>
</tr>
<tr>
<td style="text-align:center"><code>||</code></td>
<td style="text-align:center">完成<code>条件A</code>和<code>条件B</code>的或运算</td>
</tr>
</tbody>
</table>
<p>那么再来到复杂的条件示例上，它们将会简化成如下配置：</p>
<ul>
<li>描述：<code>玩家等级达到30级【且】充值过</code> ==&gt; 配置项：<code>player_level-30 &amp;&amp; acc_charge_total-1</code></li>
<li>描述：<code>玩家等级达到100级【或】累计登录30天</code> ==&gt; 配置项：<code>player_level-100 || acc_login_days-30</code></li>
</ul>
<p>最终的配置表格式如下：</p>
<table>
<thead>
<tr>
<th style="text-align:center">系统功能名</th>
<th style="text-align:center">注释</th>
<th style="text-align:center">开启条件</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">武器系统</td>
<td style="text-align:center">玩家等级达到5级</td>
<td style="text-align:center"><code>player_level-5</code></td>
</tr>
<tr>
<td style="text-align:center">坐骑系统</td>
<td style="text-align:center">玩家等级达到15级</td>
<td style="text-align:center"><code>player_level-15</code></td>
</tr>
<tr>
<td style="text-align:center">天赋系统</td>
<td style="text-align:center">武器系统升到10级【且】开启了坐骑系统</td>
<td style="text-align:center"><code>system_level-weapon_sys-10 &amp;&amp; is_system_open-mount_sys</code></td>
</tr>
<tr>
<td style="text-align:center">聊天系统</td>
<td style="text-align:center">玩家等级达到30级【且】充值过</td>
<td style="text-align:center"><code>player_level-30 &amp;&amp; acc_charge_total-1</code></td>
</tr>
<tr>
<td style="text-align:center">公会系统</td>
<td style="text-align:center">玩家等级达到100级【或】累计登录30天</td>
<td style="text-align:center"><code>player_level-100 || acc_login_days-30</code></td>
</tr>
</tbody>
</table>
<p>上述条件配置项已经很像我们编程语言里的条件表达式了，比如C++里面的if statement，与之相比我们还差了一个<code>小括号()</code>的功能和<code>逻辑运算符:非</code>的支持，不过<code>非</code>一般用不上，可以酌情考虑要不要搞，有了<code>小括号()</code>的支持后，我们可以表达更加复杂的条件了，诸如：</p>
<ul>
<li>描述：<code>(武器系统升至50级 【且】锻造系统升至30级) 或 玩家充值达到10000元</code></li>
<li>配置项：<code>(system_level-weapon_sys-50 &amp;&amp; system_level-mount_sys-30) || acc_charge_total-10000</code></li>
</ul>
<p>给这类复杂条件起个名字，叫做<code>条件组</code>，因为每个小括号包裹住的条件可以当作一个条件分层组，如果完全没有小括号的话，可以看作它有个隐藏的小括号，同策划童鞋沟通好，达成共识</p>
<h2 id="程序设计" class="heading-element">
  <a href="#%e7%a8%8b%e5%ba%8f%e8%ae%be%e8%ae%a1" class="heading-mark"></a>程序设计</h2><p>上面已经将相关复杂条件描述的条件配置都设计好了，相关测试用例也收集了一些，那么接下来就是提供功能支持来解析条件配置，并且封装好判断接口，再将各个条件类型的支持给加上</p>
<p>程序实现步骤拆解：</p>
<ol>
<li>实现一个Tokenizer：解析这个配置项文本，依据其设计好的分割规则，拆分成一个Token数组，然后提取里面的<code>条件块</code>和<code>逻辑运算符</code>和<code>层级关系</code>，举个简单例子：将 <code>system_level-weapon_sys-50 &amp;&amp; system_level-mount_sys-30</code> 解析成一个数组：<code>system_level-weapon_sys-50</code>、<code>&amp;&amp;</code>、<code>system_level-mount_sys-30</code></li>
<li>将ConditionToken进行解析并返回结果：将上述例子里的 <code>system_level-weapon_sys-50</code>、<code>system_level-mount_sys-30</code> 进一步解析，并且调用各个系统的数据判断该条件的结果，将结果结合<code>&amp;&amp;</code>逻辑运算符得出结果，可以简化成 <code>result1 &amp;&amp; result2</code></li>
</ol>
<h3 id="功能实现" class="heading-element">
  <a href="#%e5%8a%9f%e8%83%bd%e5%ae%9e%e7%8e%b0" class="heading-mark"></a>功能实现</h3><p><a href="https://github.com/YaoXuanZhi/condition_group"target="_blank" rel="external nofollow noopener noreferrer">condition_group_tokenizer</a> 项目本身就是一个简单且易用的条件组分词器，提供了多种语言的实现，包含了c#、c++、python等语言的支持，参考该项目的Demo示例，重载<code>ProxyCondition()</code>方法，在其内部直接一步到位进行步骤2即可</p>
<p>这里贴了Python版的测试用例，其它语言依葫芦画瓢就行</p>
<div class="highlight" id="id-1"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span><span class="lnt">169
</span><span class="lnt">170
</span><span class="lnt">171
</span><span class="lnt">172
</span><span class="lnt">173
</span><span class="lnt">174
</span><span class="lnt">175
</span><span class="lnt">176
</span><span class="lnt">177
</span><span class="lnt">178
</span><span class="lnt">179
</span><span class="lnt">180
</span><span class="lnt">181
</span><span class="lnt">182
</span><span class="lnt">183
</span><span class="lnt">184
</span><span class="lnt">185
</span><span class="lnt">186
</span><span class="lnt">187
</span><span class="lnt">188
</span><span class="lnt">189
</span><span class="lnt">190
</span><span class="lnt">191
</span><span class="lnt">192
</span><span class="lnt">193
</span><span class="lnt">194
</span><span class="lnt">195
</span><span class="lnt">196
</span><span class="lnt">197
</span><span class="lnt">198
</span><span class="lnt">199
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># coding=utf-8</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">condition_group_tokenizer</span> <span class="kn">import</span> <span class="n">ConditionGroupTokenizer</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">unittest</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">PlayerFakeDataComponent</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;&#39;&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">    伪造玩家数据
</span></span></span><span class="line"><span class="cl"><span class="s1">    &#39;&#39;&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">buildFakeDatas</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">buildFakeDatas</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;&#39;&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">        测试用例可以重载该函数
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#39;&#39;&#39;</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># 已开启的系统数据</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">systemDatas</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;weapon_sys&#34;</span> <span class="p">:</span> <span class="p">{</span><span class="s2">&#34;level&#34;</span><span class="p">:</span><span class="mi">39</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;mount_sys&#34;</span> <span class="p">:</span> <span class="p">{</span><span class="s2">&#34;level&#34;</span><span class="p">:</span><span class="mi">31</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1"># 累计登录天数</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">accLoginDays</span> <span class="o">=</span> <span class="mi">3</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1"># 累计充值金额</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">accChargeTotal</span> <span class="o">=</span> <span class="mi">3</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1"># 玩家等级</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">level</span> <span class="o">=</span> <span class="mi">3</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">PlayerConditionComponent</span><span class="p">(</span><span class="n">ConditionGroupTokenizer</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s2">    玩家条件组件
</span></span></span><span class="line"><span class="cl"><span class="s2">    &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">playerDataComponent</span><span class="p">:</span><span class="n">PlayerFakeDataComponent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">playerDataComponent</span> <span class="o">=</span> <span class="n">playerDataComponent</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">proxyCondition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">isPromt</span><span class="p">:</span><span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">elements</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&#34;-&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">atomType</span> <span class="o">=</span> <span class="n">elements</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="n">params</span> <span class="o">=</span> <span class="n">elements</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">checkConditionAtom</span><span class="p">(</span><span class="n">atomType</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">isPromt</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;判断：</span><span class="si">{</span><span class="n">atomType</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">params</span><span class="si">}</span><span class="s2"> 结果为：</span><span class="si">{</span><span class="n">result</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">result</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">checkConditionAtom</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">atomType</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;&#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s2">        根据条件类型来逐个判断
</span></span></span><span class="line"><span class="cl"><span class="s2">        &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">atomType</span> <span class="o">==</span> <span class="s2">&#34;is_system_open&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">systemId</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">systemId</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">playerDataComponent</span><span class="o">.</span><span class="n">systemDatas</span>
</span></span><span class="line"><span class="cl">        <span class="k">elif</span> <span class="n">atomType</span> <span class="o">==</span> <span class="s2">&#34;system_level&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">systemId</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">            <span class="n">needSystemLevel</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">systemId</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">playerDataComponent</span><span class="o">.</span><span class="n">systemDatas</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="n">systemInfo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">playerDataComponent</span><span class="o">.</span><span class="n">systemDatas</span><span class="p">[</span><span class="n">systemId</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">systemInfo</span><span class="p">[</span><span class="s2">&#34;level&#34;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">needSystemLevel</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="kc">False</span>
</span></span><span class="line"><span class="cl">        <span class="k">elif</span> <span class="n">atomType</span> <span class="o">==</span> <span class="s2">&#34;player_level&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">needPlayerLevel</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">playerDataComponent</span><span class="o">.</span><span class="n">level</span> <span class="o">&gt;=</span> <span class="n">needPlayerLevel</span>
</span></span><span class="line"><span class="cl">        <span class="k">elif</span> <span class="n">atomType</span> <span class="o">==</span> <span class="s2">&#34;acc_charge_total&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">needAccTotal</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">playerDataComponent</span><span class="o">.</span><span class="n">accChargeTotal</span> <span class="o">&gt;=</span> <span class="n">needAccTotal</span>
</span></span><span class="line"><span class="cl">        <span class="k">elif</span> <span class="n">atomType</span> <span class="o">==</span> <span class="s2">&#34;acc_login_days&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">needAccDays</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">playerDataComponent</span><span class="o">.</span><span class="n">accLoginDays</span> <span class="o">&gt;=</span> <span class="n">needAccDays</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span><span class="p">:</span> 
</span></span><span class="line"><span class="cl">            <span class="k">assert</span> <span class="kc">False</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&#34;条件类型：</span><span class="si">{</span><span class="n">atomType</span><span class="si">}</span><span class="s2"> 还没支持，请完善相关条件判断逻辑&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="kc">False</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">TestCondtionGroupComponent</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">methodName</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&#34;且运算逻辑&#34;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">methodName</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">test_and_operator_success</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;&#39;&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">        测试用例-&amp;&amp;运算符:成功
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#39;&#39;&#39;</span>
</span></span><span class="line"><span class="cl">        <span class="k">class</span> <span class="nc">TestDataComponent</span><span class="p">(</span><span class="n">PlayerFakeDataComponent</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="k">def</span> <span class="nf">buildFakeDatas</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">                <span class="c1"># 已开启的系统数据</span>
</span></span><span class="line"><span class="cl">                <span class="bp">self</span><span class="o">.</span><span class="n">systemDatas</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;weapon_sys&#34;</span> <span class="p">:</span> <span class="p">{</span><span class="s2">&#34;level&#34;</span><span class="p">:</span><span class="mi">50</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;mount_sys&#34;</span> <span class="p">:</span> <span class="p">{</span><span class="s2">&#34;level&#34;</span><span class="p">:</span><span class="mi">60</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="c1"># 累计登录天数</span>
</span></span><span class="line"><span class="cl">                <span class="bp">self</span><span class="o">.</span><span class="n">accLoginDays</span> <span class="o">=</span> <span class="mi">3</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="c1"># 累计充值金额</span>
</span></span><span class="line"><span class="cl">                <span class="bp">self</span><span class="o">.</span><span class="n">accChargeTotal</span> <span class="o">=</span> <span class="mi">3</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="c1"># 玩家等级</span>
</span></span><span class="line"><span class="cl">                <span class="bp">self</span><span class="o">.</span><span class="n">level</span> <span class="o">=</span> <span class="mi">3</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">source</span> <span class="o">=</span> <span class="s2">&#34;system_level-weapon_sys-50 &amp;&amp; system_level-mount_sys-30&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="n">dataComponent</span> <span class="o">=</span> <span class="n">TestDataComponent</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="n">conditionComponent</span> <span class="o">=</span> <span class="n">PlayerConditionComponent</span><span class="p">(</span><span class="n">dataComponent</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">result</span> <span class="o">=</span> <span class="n">conditionComponent</span><span class="o">.</span><span class="n">directCheck</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&#34;判断：</span><span class="si">{</span><span class="n">source</span><span class="si">}</span><span class="s2"> 结果为：</span><span class="si">{</span><span class="n">result</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">test_and_operator_fail</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;&#39;&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">        测试用例-&amp;&amp;运算符:失败
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#39;&#39;&#39;</span>
</span></span><span class="line"><span class="cl">        <span class="k">class</span> <span class="nc">TestDataComponent</span><span class="p">(</span><span class="n">PlayerFakeDataComponent</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="k">def</span> <span class="nf">buildFakeDatas</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;&#39;&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">                伪造玩家数据
</span></span></span><span class="line"><span class="cl"><span class="s1">                &#39;&#39;&#39;</span>
</span></span><span class="line"><span class="cl">                <span class="c1"># 已开启的系统数据</span>
</span></span><span class="line"><span class="cl">                <span class="bp">self</span><span class="o">.</span><span class="n">systemDatas</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;weapon_sys&#34;</span> <span class="p">:</span> <span class="p">{</span><span class="s2">&#34;level&#34;</span><span class="p">:</span><span class="mi">50</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;mount_sys&#34;</span> <span class="p">:</span> <span class="p">{</span><span class="s2">&#34;level&#34;</span><span class="p">:</span><span class="mi">29</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="c1"># 累计登录天数</span>
</span></span><span class="line"><span class="cl">                <span class="bp">self</span><span class="o">.</span><span class="n">accLoginDays</span> <span class="o">=</span> <span class="mi">3</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="c1"># 累计充值金额</span>
</span></span><span class="line"><span class="cl">                <span class="bp">self</span><span class="o">.</span><span class="n">accChargeTotal</span> <span class="o">=</span> <span class="mi">3</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="c1"># 玩家等级</span>
</span></span><span class="line"><span class="cl">                <span class="bp">self</span><span class="o">.</span><span class="n">level</span> <span class="o">=</span> <span class="mi">3</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">source</span> <span class="o">=</span> <span class="s2">&#34;system_level-weapon_sys-50 &amp;&amp; system_level-mount_sys-30&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="n">dataComponent</span> <span class="o">=</span> <span class="n">TestDataComponent</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="n">conditionComponent</span> <span class="o">=</span> <span class="n">PlayerConditionComponent</span><span class="p">(</span><span class="n">dataComponent</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">result</span> <span class="o">=</span> <span class="n">conditionComponent</span><span class="o">.</span><span class="n">directCheck</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&#34;判断：</span><span class="si">{</span><span class="n">source</span><span class="si">}</span><span class="s2"> 结果为：</span><span class="si">{</span><span class="n">result</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">test_or_operator_success</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;&#39;&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">        测试用例-&amp;&amp;运算符:成功
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#39;&#39;&#39;</span>
</span></span><span class="line"><span class="cl">        <span class="k">class</span> <span class="nc">TestDataComponent</span><span class="p">(</span><span class="n">PlayerFakeDataComponent</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="k">def</span> <span class="nf">buildFakeDatas</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;&#39;&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">                伪造玩家数据
</span></span></span><span class="line"><span class="cl"><span class="s1">                &#39;&#39;&#39;</span>
</span></span><span class="line"><span class="cl">                <span class="c1"># 已开启的系统数据</span>
</span></span><span class="line"><span class="cl">                <span class="bp">self</span><span class="o">.</span><span class="n">systemDatas</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;weapon_sys&#34;</span> <span class="p">:</span> <span class="p">{</span><span class="s2">&#34;level&#34;</span><span class="p">:</span><span class="mi">50</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;mount_sys&#34;</span> <span class="p">:</span> <span class="p">{</span><span class="s2">&#34;level&#34;</span><span class="p">:</span><span class="mi">29</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="c1"># 累计登录天数</span>
</span></span><span class="line"><span class="cl">                <span class="bp">self</span><span class="o">.</span><span class="n">accLoginDays</span> <span class="o">=</span> <span class="mi">12</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="c1"># 累计充值金额</span>
</span></span><span class="line"><span class="cl">                <span class="bp">self</span><span class="o">.</span><span class="n">accChargeTotal</span> <span class="o">=</span> <span class="mi">3</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="c1"># 玩家等级</span>
</span></span><span class="line"><span class="cl">                <span class="bp">self</span><span class="o">.</span><span class="n">level</span> <span class="o">=</span> <span class="mi">3</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">source</span> <span class="o">=</span> <span class="s2">&#34;is_system_open-pet_system || (acc_charge_total-100 || acc_login_days-10) || player_level-5&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="n">dataComponent</span> <span class="o">=</span> <span class="n">TestDataComponent</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="n">conditionComponent</span> <span class="o">=</span> <span class="n">PlayerConditionComponent</span><span class="p">(</span><span class="n">dataComponent</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">result</span> <span class="o">=</span> <span class="n">conditionComponent</span><span class="o">.</span><span class="n">directCheck</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&#34;判断：</span><span class="si">{</span><span class="n">source</span><span class="si">}</span><span class="s2"> 结果为：</span><span class="si">{</span><span class="n">result</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">test_or_operator_fail</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;&#39;&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">        测试用例-&amp;&amp;运算符:成功
</span></span></span><span class="line"><span class="cl"><span class="s1">        &#39;&#39;&#39;</span>
</span></span><span class="line"><span class="cl">        <span class="k">class</span> <span class="nc">TestDataComponent</span><span class="p">(</span><span class="n">PlayerFakeDataComponent</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="k">def</span> <span class="nf">buildFakeDatas</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;&#39;&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">                伪造玩家数据
</span></span></span><span class="line"><span class="cl"><span class="s1">                &#39;&#39;&#39;</span>
</span></span><span class="line"><span class="cl">                <span class="c1"># 已开启的系统数据</span>
</span></span><span class="line"><span class="cl">                <span class="bp">self</span><span class="o">.</span><span class="n">systemDatas</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;weapon_sys&#34;</span> <span class="p">:</span> <span class="p">{</span><span class="s2">&#34;level&#34;</span><span class="p">:</span><span class="mi">50</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;mount_sys&#34;</span> <span class="p">:</span> <span class="p">{</span><span class="s2">&#34;level&#34;</span><span class="p">:</span><span class="mi">29</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="c1"># 累计登录天数</span>
</span></span><span class="line"><span class="cl">                <span class="bp">self</span><span class="o">.</span><span class="n">accLoginDays</span> <span class="o">=</span> <span class="mi">3</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="c1"># 累计充值金额</span>
</span></span><span class="line"><span class="cl">                <span class="bp">self</span><span class="o">.</span><span class="n">accChargeTotal</span> <span class="o">=</span> <span class="mi">3</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="c1"># 玩家等级</span>
</span></span><span class="line"><span class="cl">                <span class="bp">self</span><span class="o">.</span><span class="n">level</span> <span class="o">=</span> <span class="mi">3</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">source</span> <span class="o">=</span> <span class="s2">&#34;is_system_open-pet_system || (acc_charge_total-100 || acc_login_days-10) || player_level-5&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="n">dataComponent</span> <span class="o">=</span> <span class="n">TestDataComponent</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="n">conditionComponent</span> <span class="o">=</span> <span class="n">PlayerConditionComponent</span><span class="p">(</span><span class="n">dataComponent</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">result</span> <span class="o">=</span> <span class="n">conditionComponent</span><span class="o">.</span><span class="n">directCheck</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&#34;判断：</span><span class="si">{</span><span class="n">source</span><span class="si">}</span><span class="s2"> 结果为：</span><span class="si">{</span><span class="n">result</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">unittest</span><span class="o">.</span><span class="n">main</span><span class="p">()</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="参考资料" class="heading-element">
  <a href="#%e5%8f%82%e8%80%83%e8%b5%84%e6%96%99" class="heading-mark"></a>参考资料</h3><ul>
<li><a href="https://zhuanlan.zhihu.com/p/98064735"target="_blank" rel="external nofollow noopener noreferrer">游戏内条件集合(与或非组合)的判定处理 C#版</a></li>
</ul></div><div class="post-footer" id="post-footer">
  <div class="post-info"><div class="post-info-line">
        <div class="post-info-md"><span><a href="/posts/condition_group/index.md" title="阅读原始文档" class="link-to-markdown">阅读原始文档</a></span></div>
        <div class="post-info-share">
          <span><a href="javascript:void(0);" title="分享到 Twitter" data-sharer="twitter" data-url="http://localhost:1313/posts/condition_group/" data-title="简易的条件组分词器" data-hashtags="条件组判断,条件判断,逻辑符运算"><i class="fa-brands fa-twitter fa-fw" aria-hidden="true"></i></a>
  <a href="javascript:void(0);" title="分享到 Facebook" data-sharer="facebook" data-url="http://localhost:1313/posts/condition_group/" data-hashtag="条件组判断"><i class="fa-brands fa-facebook-square fa-fw" aria-hidden="true"></i></a>
  <a href="javascript:void(0);" title="分享到 微博" data-sharer="weibo" data-url="http://localhost:1313/posts/condition_group/" data-title="简易的条件组分词器"><i class="fa-brands fa-weibo fa-fw" aria-hidden="true"></i></a>
  </span>
        </div>
      </div></div>

  <div class="post-info-more">
    <section class="post-tags"><i class="fa-solid fa-tags fa-fw me-1" aria-hidden="true"></i><a href="/tags/%E6%9D%A1%E4%BB%B6%E7%BB%84%E5%88%A4%E6%96%AD/" class="post-tag" title="标签 - 条件组判断">条件组判断</a><a href="/tags/%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD/" class="post-tag" title="标签 - 条件判断">条件判断</a><a href="/tags/%E9%80%BB%E8%BE%91%E7%AC%A6%E8%BF%90%E7%AE%97/" class="post-tag" title="标签 - 逻辑符运算">逻辑符运算</a></section>
    <section>
      <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
    </section>
  </div>

  <div class="post-nav"><a href="/posts/improve_msys2/" class="post-nav-item" rel="prev" title="拓展Msys2"><i class="fa-solid fa-angle-left fa-fw" aria-hidden="true"></i>拓展Msys2</a>
      <a href="/posts/ai_writer/" class="post-nav-item" rel="next" title="AI写作尝鲜">AI写作尝鲜<i class="fa-solid fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
</article>

  <aside class="toc" id="toc-auto" aria-label="目录"><h2 class="toc-title">目录&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden="true"></i></h2>
      <div class="toc-content" id="toc-content-auto"></div></aside></main><footer class="footer">
    <div class="footer-container"><div class="footer-line powered">由 <a href="https://gohugo.io/" target="_blank" rel="external nofollow noopener noreferrer" title="Hugo 0.123.1"><img class="hugo-icon" src="/images/hugo.min.svg" alt="Hugo logo" /> Hugo</a> 强力驱动 | 主题 - <a href="https://github.com/hugo-fixit/FixIt" target="_blank" rel="external" title="FixIt v0.3.2-RC"><img class="fixit-icon" src="/images/fixit.min.svg" alt="FixIt logo" /> FixIt</a>
        </div><div class="footer-line copyright" itemscope itemtype="http://schema.org/CreativeWork"><i class="fa-regular fa-copyright fa-fw" aria-hidden="true"></i>
            <span itemprop="copyrightYear">2016 - 2024</span><span class="author" itemprop="copyrightHolder">
              <a href="https://github.com/YaoXuanZhi"target="_blank" rel="external nofollow noopener noreferrer">YaoXuanZhi</a></span><span class="license footer-divider"><a rel="license external nofollow noopener noreferrer" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a></span></div></div>
  </footer></div><div class="widgets"><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role="button" aria-label="回到顶部"><i class="fa-solid fa-arrow-up fa-fw" aria-hidden="true"></i><span class="variant-numeric d-none">0%</span>
        </div></div><div id="mask"></div><noscript>
    <div class="noscript-warning">FixIt 主题在启用 JavaScript 的情况下效果最佳。</div>
  </noscript>
</div><link rel="preload" href="/lib/katex/katex.min.css" as="style" onload="this.removeAttribute('onload');this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/lib/katex/katex.min.css"></noscript><link rel="stylesheet" href="/lib/cookieconsent/cookieconsent.min.css"><script src="/lib/autocomplete/autocomplete.min.js" defer></script><script src="/lib/fuse/fuse.min.js" defer></script><script src="/lib/sharer/sharer.min.js" async defer></script><script src="/lib/katex/katex.min.js" defer></script><script src="/lib/katex/auto-render.min.js" defer></script><script src="/lib/katex/copy-tex.min.js" defer></script><script src="/lib/katex/mhchem.min.js" defer></script><script src="/lib/cookieconsent/cookieconsent.min.js" defer></script><script>window.config={"code":{"copyTitle":"复制到剪贴板","editLockTitle":"锁定可编辑代码块","editUnLockTitle":"解锁可编辑代码块","editable":true,"maxShownLines":11},"comment":{"enable":false},"cookieconsent":{"content":{"dismiss":"同意","link":"了解更多","message":"本网站使用 Cookies 来改善您的浏览体验。"},"enable":true,"palette":{"button":{"background":"#f0f0f0"},"popup":{"background":"#1aa3ff"}},"theme":"edgeless"},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":true,"left":"\\begin{equation}","right":"\\end{equation}"},{"display":true,"left":"\\begin{equation*}","right":"\\end{equation*}"},{"display":true,"left":"\\begin{align}","right":"\\end{align}"},{"display":true,"left":"\\begin{align*}","right":"\\end{align*}"},{"display":true,"left":"\\begin{alignat}","right":"\\end{alignat}"},{"display":true,"left":"\\begin{alignat*}","right":"\\end{alignat*}"},{"display":true,"left":"\\begin{gather}","right":"\\end{gather}"},{"display":true,"left":"\\begin{CD}","right":"\\end{CD}"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"distance":100,"findAllMatches":false,"fuseIndexURL":"/index.json","highlightTag":"em","ignoreFieldNorm":false,"ignoreLocation":false,"isCaseSensitive":false,"location":0,"maxResultLength":10,"minMatchCharLength":2,"noResultsFound":"没有找到结果","snippetLength":30,"threshold":0.3,"type":"fuse","useExtendedSearch":false}};</script><script src="/js/theme.min.js" defer></script></body>
</html>
