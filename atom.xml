<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>YXZ&#39;s Blog</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://yaoxuanzhi.github.io/"/>
  <updated>2021-06-14T11:00:49.589Z</updated>
  <id>https://yaoxuanzhi.github.io/</id>
  
  <author>
    <name>Hexo</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>改造msys2</title>
    <link href="https://yaoxuanzhi.github.io/news/2021/06/12/improve-msys2/"/>
    <id>https://yaoxuanzhi.github.io/news/2021/06/12/improve-msys2/</id>
    <published>2021-06-12T00:00:00.000Z</published>
    <updated>2021-06-14T11:00:49.589Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>由于新工作的开发需要，其服务器工程在windows下需要借助msys2上的gcc环境来进行编译并运行，因此，日常开发工作中，需要经常打开msys2终端来输入各种shell指令</p><p>但本人更加偏好有个集成的dos脚本，在上面输入【1】【2】【3】等数字之后，就能执行相应的【构建】【启动】【测试】等命令，并且直接调用msys2上的类linux环境来执行这些命令</p><p>本着 <strong>自己动手 丰衣足食</strong> 的打算，已经将这个集成脚本完成了，本篇文章是其副产物</p><h2 id="为msys2的追加镜像源"><a href="#为msys2的追加镜像源" class="headerlink" title="为msys2的追加镜像源"></a>为msys2的追加镜像源</h2><p>基于 <a href="https://mirrors.tuna.tsinghua.edu.cn/help/msys2/" target="_blank" rel="noopener">《MSYS2 镜像使用帮助》</a>提供的实现思路，最初使用Python来快速实现了一个脚本</p><details><br>  <summary>append_extra_mirror_source.py</summary><br><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># !/user/bin/env python</span><br><span class="hljs-comment"># -*- coding:utf-8 -*- </span><br><span class="hljs-keyword">import</span> os, glob, codecs, re, argparse<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">add_mirror_url</span><span class="hljs-params">(mirror_url)</span>:</span><br>    mirror_paths = glob.glob(<span class="hljs-string">"mirrorlist*"</span>)<br><br>    re_pattern = <span class="hljs-string">r'(Server = )(https.*.org)(.*)'</span><br><br>    <span class="hljs-keyword">for</span> path <span class="hljs-keyword">in</span> mirror_paths:<br>        <span class="hljs-keyword">with</span> codecs.open(path, mode=<span class="hljs-string">"r"</span>, encoding=<span class="hljs-string">"utf-8"</span>, errors=<span class="hljs-string">'ignore'</span>) <span class="hljs-keyword">as</span> f:<br>            config = f.read()<br>            f.close()<br>            search_re = re.search(re_pattern, config, re.M|re.I)<br>            exist_same_re = re.search(mirror_url, config, re.M|re.I)<br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> exist_same_re <span class="hljs-keyword">and</span> search_re:<br>                mirror_url_item = search_re.group()<br>                temp = re.compile(re_pattern)<br>                mirror_url_item = temp.sub(<span class="hljs-string">r'\1%(mirror_url)s\3'</span> % &#123;<span class="hljs-string">'mirror_url'</span>: mirror_url&#125;, mirror_url_item)<br>                new_config = <span class="hljs-string">'%(mirror_url)s\n%(source)s'</span> % &#123;<span class="hljs-string">'mirror_url'</span>: mirror_url_item, <span class="hljs-string">'source'</span>: config&#125;<br>                outfile = codecs.open(path, <span class="hljs-string">'w'</span>, <span class="hljs-string">'utf-8'</span>)<br>                outfile.write(new_config)<br>                outfile.close()<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">'__main__'</span>:<br>    parser = argparse.ArgumentParser()<br>    parser.add_argument(<span class="hljs-string">"-url"</span>, <span class="hljs-string">"--mirror_url"</span>, help=<span class="hljs-string">"输入其他镜像源"</span>, default=<span class="hljs-string">"https://mirrors.cloud.tencent.com/msys2"</span>)<br>    parser.add_argument(<span class="hljs-string">"-msys2"</span>, <span class="hljs-string">"--msys2_dir"</span>, help=<span class="hljs-string">"msys2安装目录"</span>, default=<span class="hljs-string">"C:/msys64"</span>)<br><br>    args = parser.parse_args()<br><br>    pacman_mirror_dir = <span class="hljs-string">"%s/etc/pacman.d"</span> % (args.msys2_dir)<br>    os.chdir(pacman_mirror_dir)<br>    add_mirror_url(args.mirror_url)<br></code></pre></td></tr></table></figure><br><br></details><p>但考虑到后续会推广给不会撸码的童鞋使用这个集成脚本，而这些童鞋大部分都是首次安装msys2的，因此，基于Python实现的脚本显然是不行的，又重新实现了一个bash脚本</p><p>由于bash脚本本身对文件、字符串等操作的支持极其有限，在此使用了msys2内置的sed、cp、cat、grep等工具来实现</p><p>在编写这个bash脚本的时候，遇到了一些知识盲区，特意记录下来：</p><ul><li>✔ grep正则查找</li><li>✔ sed正则替换需要对双引号、小括号等特殊字符进行前置转义</li><li>✔ 在shell函数内修改传参变量的内容</li><li>✔ 在文件首行插入新内容</li></ul><details><br>  <summary>append_extra_mirror_source.sh</summary><br><br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-meta">#!/bin/bash<br></span><br><span class="hljs-comment"># sed 需要对斜杆和括号等字符进行转义后才能正常正则替换</span><br><span class="hljs-function"><span class="hljs-title">replace_escape_string</span></span>()&#123;<br>    <span class="hljs-built_in">eval</span> <span class="hljs-variable">$2</span>=\<span class="hljs-string">"<span class="hljs-variable">$(eval echo "\$&#123;$1&#125;" | sed "s/\//\\\\\//g; s/(/\\\\(/g; s/)</span>/\\\\)/g"</span>)\<span class="hljs-string">"<br>&#125;<br><br># 在文件头上加入其它镜像源<br>push_front_mirror_url()&#123;<br>    _source_config_file=<span class="hljs-variable">$1</span><br>    _backup_config_file=<span class="hljs-variable">$(dirname $1)</span>/bak_<span class="hljs-variable">$(basename $1)</span><br>    _old_mirror_pattern=<span class="hljs-variable">$2</span><br>    _new_mirror_host=<span class="hljs-variable">$3</span><br><br>    # 备份原本的镜像源配置<br>    if [ ! -f <span class="hljs-variable">$&#123;_backup_config_file&#125;</span> ]; then<br>        cp <span class="hljs-variable">$_source_config_file</span> <span class="hljs-variable">$&#123;_backup_config_file&#125;</span><br>    fi<br><br>    # 找到镜像源配置模板<br>    mirror_temp_url=<span class="hljs-variable">$(grep -r -P "$_old_mirror_pattern" $&#123;_backup_config_file&#125;)</span><br><br>    replace_escape_string _old_mirror_pattern _old_mirror_pattern<br>    replace_escape_string _new_mirror_host _new_mirror_host<br><br>    # 根据模板镜像源修改成新的镜像源<br>    new_mirror_url=<span class="hljs-variable">$(echo $mirror_temp_url | sed "s/$_old_mirror_pattern/\\1$_new_mirror_host\\3/g")</span><br><br>    # 在文件头上插入新的镜像源链接<br>    (echo <span class="hljs-variable">$new_mirror_url</span> &amp;&amp; cat <span class="hljs-variable">$&#123;_backup_config_file&#125;</span>) &gt; <span class="hljs-variable">$_source_config_file</span><br>&#125;<br><br>main()&#123;<br>    # 腾讯云镜像源<br>    # new_mirror_host="</span>https://mirrors.cloud.tencent.com/msys2<span class="hljs-string">"<br><br>    # 清华镜像源<br>    new_mirror_host="</span>https://mirrors.tuna.tsinghua.edu.cn/msys2<span class="hljs-string">"<br><br>    old_mirror_pattern="</span>(Server.*)(http.*repo.msys2.org)(.*)<span class="hljs-string">"<br><br>    if [ <span class="hljs-variable">$&#123;#&#125;</span> == 1 ]; then<br>        new_mirror_host=<span class="hljs-variable">$1</span><br>    fi<br><br>    # 遍历pacman的镜像源配置<br>    for file in /etc/pacman.d/mirror*; do<br>        push_front_mirror_url <span class="hljs-variable">$file</span> <span class="hljs-variable">$old_mirror_pattern</span> <span class="hljs-variable">$new_mirror_host</span><br>    done<br>&#125;<br><br>main <span class="hljs-variable">$1</span></span><br></code></pre></td></tr></table></figure><br><br></details><h2 id="改造msys2"><a href="#改造msys2" class="headerlink" title="改造msys2"></a>改造msys2</h2><h3 id="让msys2支持在dos上直接执行shell指令"><a href="#让msys2支持在dos上直接执行shell指令" class="headerlink" title="让msys2支持在dos上直接执行shell指令"></a>让msys2支持在dos上直接执行shell指令</h3><p>在着手实现过程中，以下这些点是挺有意思的：</p><ul><li>✔ 在dos中调用msys2来直接执行shell指令<blockquote><p>详情看mintty的参数列表：<code>-c bash_cmd</code></p></blockquote></li><li>✔ 如何指定msys2的启动目录<blockquote><p>详情看mintty的参数列表：<code>-where dir</code></p></blockquote></li><li>✔ 在msys2里，将父bash的alias传递给子bash，并且执行其它指令<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">bash --noprofile --rcfile &lt;(<span class="hljs-built_in">alias</span>)<br></code></pre></td></tr></table></figure></li></ul><details><br>  <summary>msys2_shell_ex.cmd</summary><br><br>在msys2_shell.cmd之上增加一个命令行参数支持：<code>-outside_exec COMMAND</code><br><br><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br></pre></td><td class="code"><pre><code class="hljs bat">@<span class="hljs-built_in">echo</span> off<br><span class="hljs-built_in">setlocal</span> EnableDelayedExpansion<br><br><span class="hljs-built_in">set</span> "WD=<span class="hljs-variable">%__CD__%</span>"<br><span class="hljs-keyword">if</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXIST</span> "<span class="hljs-variable">%WD%</span>msys-<span class="hljs-number">2</span>.<span class="hljs-number">0</span>.dll" <span class="hljs-built_in">set</span> "WD=%~dp0usr\bin\"<br><span class="hljs-built_in">set</span> "LOGINSHELL=bash"<br><span class="hljs-built_in">set</span> /a msys2_shiftCounter=<span class="hljs-number">0</span><br><span class="hljs-comment"><br>rem To activate windows native symlinks uncomment next line</span><br><span class="hljs-comment">rem set MSYS=winsymlinks:nativestrict</span><br><span class="hljs-comment"><br>rem Set debugging program for errors</span><br><span class="hljs-comment">rem set MSYS=error_start:%WD%../../mingw64/bin/qtcreator.exe^|-debug^|^&lt;process-id^&gt;</span><br><span class="hljs-comment"><br>rem To export full current PATH from environment into MSYS2 use '-use-full-path' parameter</span><br><span class="hljs-comment">rem or uncomment next line</span><br><span class="hljs-comment">rem set MSYS2_PATH_TYPE=inherit</span><br><br>:checkparams<br><span class="hljs-comment">rem Help option</span><br><span class="hljs-keyword">if</span> "x%~<span class="hljs-number">1</span>" == "x-<span class="hljs-built_in">help</span>" (<br>  <span class="hljs-keyword">call</span> :printhelp "%~nx0"<br>  <span class="hljs-keyword">exit</span> /b <span class="hljs-variable">%ERRORLEVEL%</span><br>)<br><span class="hljs-keyword">if</span> "x%~<span class="hljs-number">1</span>" == "x--<span class="hljs-built_in">help</span>" (<br>  <span class="hljs-keyword">call</span> :printhelp "%~nx0"<br>  <span class="hljs-keyword">exit</span> /b <span class="hljs-variable">%ERRORLEVEL%</span><br>)<br><span class="hljs-keyword">if</span> "x%~<span class="hljs-number">1</span>" == "x-?" (<br>  <span class="hljs-keyword">call</span> :printhelp "%~nx0"<br>  <span class="hljs-keyword">exit</span> /b <span class="hljs-variable">%ERRORLEVEL%</span><br>)<br><span class="hljs-keyword">if</span> "x%~<span class="hljs-number">1</span>" == "x/?" (<br>  <span class="hljs-keyword">call</span> :printhelp "%~nx0"<br>  <span class="hljs-keyword">exit</span> /b <span class="hljs-variable">%ERRORLEVEL%</span><br>)<br><span class="hljs-comment">rem Shell types</span><br><span class="hljs-keyword">if</span> "x%~<span class="hljs-number">1</span>" == "x-msys" <span class="hljs-built_in">shift</span>&amp; <span class="hljs-built_in">set</span> /a msys2_shiftCounter+=<span class="hljs-number">1</span>&amp; <span class="hljs-built_in">set</span> MSYSTEM=MSYS&amp; <span class="hljs-keyword">goto</span> :checkparams<br><span class="hljs-keyword">if</span> "x%~<span class="hljs-number">1</span>" == "x-msys2" <span class="hljs-built_in">shift</span>&amp; <span class="hljs-built_in">set</span> /a msys2_shiftCounter+=<span class="hljs-number">1</span>&amp; <span class="hljs-built_in">set</span> MSYSTEM=MSYS&amp; <span class="hljs-keyword">goto</span> :checkparams<br><span class="hljs-keyword">if</span> "x%~<span class="hljs-number">1</span>" == "x-mingw32" <span class="hljs-built_in">shift</span>&amp; <span class="hljs-built_in">set</span> /a msys2_shiftCounter+=<span class="hljs-number">1</span>&amp; <span class="hljs-built_in">set</span> MSYSTEM=MINGW32&amp; <span class="hljs-keyword">goto</span> :checkparams<br><span class="hljs-keyword">if</span> "x%~<span class="hljs-number">1</span>" == "x-mingw64" <span class="hljs-built_in">shift</span>&amp; <span class="hljs-built_in">set</span> /a msys2_shiftCounter+=<span class="hljs-number">1</span>&amp; <span class="hljs-built_in">set</span> MSYSTEM=MINGW64&amp; <span class="hljs-keyword">goto</span> :checkparams<br><span class="hljs-keyword">if</span> "x%~<span class="hljs-number">1</span>" == "x-ucrt64" <span class="hljs-built_in">shift</span>&amp; <span class="hljs-built_in">set</span> /a msys2_shiftCounter+=<span class="hljs-number">1</span>&amp; <span class="hljs-built_in">set</span> MSYSTEM=UCRT64&amp; <span class="hljs-keyword">goto</span> :checkparams<br><span class="hljs-keyword">if</span> "x%~<span class="hljs-number">1</span>" == "x-clang64" <span class="hljs-built_in">shift</span>&amp; <span class="hljs-built_in">set</span> /a msys2_shiftCounter+=<span class="hljs-number">1</span>&amp; <span class="hljs-built_in">set</span> MSYSTEM=CLANG64&amp; <span class="hljs-keyword">goto</span> :checkparams<br><span class="hljs-keyword">if</span> "x%~<span class="hljs-number">1</span>" == "x-mingw" <span class="hljs-built_in">shift</span>&amp; <span class="hljs-built_in">set</span> /a msys2_shiftCounter+=<span class="hljs-number">1</span>&amp; (<span class="hljs-keyword">if</span> <span class="hljs-keyword">exist</span> "<span class="hljs-variable">%WD%</span>..\..\mingw64" (<span class="hljs-built_in">set</span> MSYSTEM=MINGW64) <span class="hljs-keyword">else</span> (<span class="hljs-built_in">set</span> MSYSTEM=MINGW32))&amp; <span class="hljs-keyword">goto</span> :checkparams<br><span class="hljs-comment">rem Console types</span><br><span class="hljs-keyword">if</span> "x%~<span class="hljs-number">1</span>" == "x-mintty" <span class="hljs-built_in">shift</span>&amp; <span class="hljs-built_in">set</span> /a msys2_shiftCounter+=<span class="hljs-number">1</span>&amp; <span class="hljs-built_in">set</span> MSYSCON=mintty.exe&amp; <span class="hljs-keyword">goto</span> :checkparams<br><span class="hljs-keyword">if</span> "x%~<span class="hljs-number">1</span>" == "x-conemu" <span class="hljs-built_in">shift</span>&amp; <span class="hljs-built_in">set</span> /a msys2_shiftCounter+=<span class="hljs-number">1</span>&amp; <span class="hljs-built_in">set</span> MSYSCON=conemu&amp; <span class="hljs-keyword">goto</span> :checkparams<br><span class="hljs-keyword">if</span> "x%~<span class="hljs-number">1</span>" == "x-defterm" <span class="hljs-built_in">shift</span>&amp; <span class="hljs-built_in">set</span> /a msys2_shiftCounter+=<span class="hljs-number">1</span>&amp; <span class="hljs-built_in">set</span> MSYSCON=defterm&amp; <span class="hljs-keyword">goto</span> :checkparams<br><span class="hljs-comment">rem Other parameters</span><br><span class="hljs-keyword">if</span> "x%~<span class="hljs-number">1</span>" == "x-full-<span class="hljs-built_in">path</span>" <span class="hljs-built_in">shift</span>&amp; <span class="hljs-built_in">set</span> /a msys2_shiftCounter+=<span class="hljs-number">1</span>&amp; <span class="hljs-built_in">set</span> MSYS2_PATH_TYPE=inherit&amp; <span class="hljs-keyword">goto</span> :checkparams<br><span class="hljs-keyword">if</span> "x%~<span class="hljs-number">1</span>" == "x-use-full-<span class="hljs-built_in">path</span>" <span class="hljs-built_in">shift</span>&amp; <span class="hljs-built_in">set</span> /a msys2_shiftCounter+=<span class="hljs-number">1</span>&amp; <span class="hljs-built_in">set</span> MSYS2_PATH_TYPE=inherit&amp; <span class="hljs-keyword">goto</span> :checkparams<br><span class="hljs-keyword">if</span> "x%~<span class="hljs-number">1</span>" == "x-here" <span class="hljs-built_in">shift</span>&amp; <span class="hljs-built_in">set</span> /a msys2_shiftCounter+=<span class="hljs-number">1</span>&amp; <span class="hljs-built_in">set</span> CHERE_INVOKING=enabled_from_arguments&amp; <span class="hljs-keyword">goto</span> :checkparams<br><span class="hljs-keyword">if</span> "x%~<span class="hljs-number">1</span>" == "x-where" (<br>  <span class="hljs-keyword">if</span> "x%~<span class="hljs-number">2</span>" == "x" (<br>    <span class="hljs-built_in">echo</span> Working directory is <span class="hljs-keyword">not</span> specified <span class="hljs-keyword">for</span> -where parameter. <span class="hljs-number">1</span>&gt;&amp;<span class="hljs-number">2</span><br>    <span class="hljs-keyword">exit</span> /b <span class="hljs-number">2</span><br>  )<br>  <span class="hljs-built_in">cd</span> /d "%~<span class="hljs-number">2</span>" || (<br>    <span class="hljs-built_in">echo</span> Cannot <span class="hljs-built_in">set</span> specified working diretory "%~<span class="hljs-number">2</span>". <span class="hljs-number">1</span>&gt;&amp;<span class="hljs-number">2</span><br>    <span class="hljs-keyword">exit</span> /b <span class="hljs-number">2</span><br>  )<br>  <span class="hljs-built_in">set</span> CHERE_INVOKING=enabled_from_arguments<br><span class="hljs-comment"><br>  rem Ensure parentheses in argument do not interfere with FOR IN loop below.</span><br>  <span class="hljs-built_in">set</span> msys2_arg="%~<span class="hljs-number">2</span>"<br>  <span class="hljs-keyword">call</span> :substituteparens msys2_arg<br>  <span class="hljs-keyword">call</span> :removequotes msys2_arg<br><span class="hljs-comment"><br>  rem Increment msys2_shiftCounter by number of words in argument (as cmd.exe saw it).</span><br><span class="hljs-comment">  rem (Note that this form of FOR IN loop uses same delimiters as parameters.)</span><br>  <span class="hljs-keyword">for</span> <span class="hljs-variable">%%a</span> <span class="hljs-keyword">in</span> (<span class="hljs-variable">!msys2_arg!</span>) <span class="hljs-keyword">do</span> <span class="hljs-built_in">set</span> /a msys2_shiftCounter+=<span class="hljs-number">1</span><br>)&amp; <span class="hljs-built_in">shift</span>&amp; <span class="hljs-built_in">shift</span>&amp; <span class="hljs-built_in">set</span> /a msys2_shiftCounter+=<span class="hljs-number">1</span>&amp; <span class="hljs-keyword">goto</span> :checkparams<br><span class="hljs-keyword">if</span> "x%~<span class="hljs-number">1</span>" == "x-no-<span class="hljs-built_in">start</span>" <span class="hljs-built_in">shift</span>&amp; <span class="hljs-built_in">set</span> /a msys2_shiftCounter+=<span class="hljs-number">1</span>&amp; <span class="hljs-built_in">set</span> MSYS2_NOSTART=yes&amp; <span class="hljs-keyword">goto</span> :checkparams<br><span class="hljs-keyword">if</span> "x%~<span class="hljs-number">1</span>" == "x-shell" (<br>  <span class="hljs-keyword">if</span> "x%~<span class="hljs-number">2</span>" == "x" (<br>    <span class="hljs-built_in">echo</span> Shell <span class="hljs-keyword">not</span> specified <span class="hljs-keyword">for</span> -shell parameter. <span class="hljs-number">1</span>&gt;&amp;<span class="hljs-number">2</span><br>    <span class="hljs-keyword">exit</span> /b <span class="hljs-number">2</span><br>  )<br>  <span class="hljs-built_in">set</span> LOGINSHELL="%~<span class="hljs-number">2</span>"<br>  <span class="hljs-keyword">call</span> :removequotes LOGINSHELL<br>  <br>  <span class="hljs-built_in">set</span> msys2_arg="%~<span class="hljs-number">2</span>"<br>  <span class="hljs-keyword">call</span> :substituteparens msys2_arg<br>  <span class="hljs-keyword">call</span> :removequotes msys2_arg<br>  <span class="hljs-keyword">for</span> <span class="hljs-variable">%%a</span> <span class="hljs-keyword">in</span> (<span class="hljs-variable">!msys2_arg!</span>) <span class="hljs-keyword">do</span> <span class="hljs-built_in">set</span> /a msys2_shiftCounter+=<span class="hljs-number">1</span><br>)&amp; <span class="hljs-built_in">shift</span>&amp; <span class="hljs-built_in">shift</span>&amp; <span class="hljs-built_in">set</span> /a msys2_shiftCounter+=<span class="hljs-number">1</span>&amp; <span class="hljs-keyword">goto</span> :checkparams<br><span class="hljs-keyword">if</span> "x%~<span class="hljs-number">1</span>" == "x-outside_exec" (<br>  <span class="hljs-keyword">if</span> "x%~<span class="hljs-number">2</span>" == "x" (<br>    <span class="hljs-built_in">echo</span> Please input bash shell command <span class="hljs-keyword">for</span> -outside_exec parameter. <span class="hljs-number">1</span>&gt;&amp;<span class="hljs-number">2</span><br>    <span class="hljs-keyword">exit</span> /b <span class="hljs-number">2</span><br>  )<br><br>  <span class="hljs-built_in">set</span> OUTSIDE_CMD="%~<span class="hljs-number">2</span>"<br><span class="hljs-comment">  @REM call :substituteparens OUTSIDE_CMD</span><br><span class="hljs-comment">  @REM call :removequotes OUTSIDE_CMD</span><br><br>  <span class="hljs-built_in">set</span> msys2_arg="%~<span class="hljs-number">2</span>"<br>  <span class="hljs-keyword">call</span> :substituteparens msys2_arg<br>  <span class="hljs-keyword">call</span> :removequotes msys2_arg<br><span class="hljs-comment"><br>  rem Increment msys2_shiftCounter by number of words in argument (as cmd.exe saw it).</span><br><span class="hljs-comment">  rem (Note that this form of FOR IN loop uses same delimiters as parameters.)</span><br>  <span class="hljs-keyword">for</span> <span class="hljs-variable">%%a</span> <span class="hljs-keyword">in</span> (<span class="hljs-variable">!msys2_arg!</span>) <span class="hljs-keyword">do</span> <span class="hljs-built_in">set</span> /a msys2_shiftCounter+=<span class="hljs-number">1</span><br>)&amp; <span class="hljs-built_in">shift</span>&amp; <span class="hljs-built_in">shift</span>&amp; <span class="hljs-built_in">set</span> /a msys2_shiftCounter+=<span class="hljs-number">1</span>&amp; <span class="hljs-keyword">goto</span> :checkparams<br><span class="hljs-comment"><br>rem Collect remaining command line arguments to be passed to shell</span><br><span class="hljs-keyword">if</span> <span class="hljs-variable">%msys2_shiftCounter%</span> <span class="hljs-keyword">equ</span> <span class="hljs-number">0</span> <span class="hljs-built_in">set</span> SHELL_ARGS=%* &amp; <span class="hljs-keyword">goto</span> cleanvars<br><span class="hljs-built_in">set</span> msys2_full_cmd=%*<br><span class="hljs-keyword">for</span> /f "tokens=<span class="hljs-variable">%msys2_shiftCounter%</span>,* delims=,;= " <span class="hljs-variable">%%i</span> <span class="hljs-keyword">in</span> ("<span class="hljs-variable">!msys2_full_cmd!</span>") <span class="hljs-keyword">do</span> <span class="hljs-built_in">set</span> SHELL_ARGS=<span class="hljs-variable">%%j</span><br><br>:cleanvars<br><span class="hljs-built_in">set</span> msys2_arg=<br><span class="hljs-built_in">set</span> msys2_shiftCounter=<br><span class="hljs-built_in">set</span> msys2_full_cmd=<br><span class="hljs-comment"><br>rem Setup proper title and icon</span><br><span class="hljs-keyword">if</span> "<span class="hljs-variable">%MSYSTEM%</span>" == "MINGW32" (<br>  <span class="hljs-built_in">set</span> "CONTITLE=MinGW x32"<br>  <span class="hljs-built_in">set</span> "CONICON=mingw32.ico"<br>) <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> "<span class="hljs-variable">%MSYSTEM%</span>" == "MINGW64" (<br>  <span class="hljs-built_in">set</span> "CONTITLE=MinGW x64"<br>  <span class="hljs-built_in">set</span> "CONICON=mingw64.ico"<br>) <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> "<span class="hljs-variable">%MSYSTEM%</span>" == "UCRT64" (<br>  <span class="hljs-built_in">set</span> "CONTITLE=MinGW UCRT x64"<br>  <span class="hljs-built_in">set</span> "CONICON=ucrt64.ico"<br>) <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> "<span class="hljs-variable">%MSYSTEM%</span>" == "CLANG64" (<br>  <span class="hljs-built_in">set</span> "CONTITLE=MinGW Clang x64"<br>  <span class="hljs-built_in">set</span> "CONICON=clang64.ico"<br>) <span class="hljs-keyword">else</span> (<br>  <span class="hljs-built_in">set</span> "CONTITLE=MSYS2 MSYS"<br>  <span class="hljs-built_in">set</span> "CONICON=msys2.ico"<br>)<br><br><span class="hljs-keyword">if</span> "x<span class="hljs-variable">%MSYSCON%</span>" == "xmintty.exe" <span class="hljs-keyword">goto</span> startmintty<br><span class="hljs-keyword">if</span> "x<span class="hljs-variable">%MSYSCON%</span>" == "xconemu" <span class="hljs-keyword">goto</span> startconemu<br><span class="hljs-keyword">if</span> "x<span class="hljs-variable">%MSYSCON%</span>" == "xdefterm" <span class="hljs-keyword">goto</span> startsh<br><br><span class="hljs-keyword">if</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXIST</span> "<span class="hljs-variable">%WD%</span>mintty.exe" <span class="hljs-keyword">goto</span> startsh<br><span class="hljs-built_in">set</span> MSYSCON=mintty.exe<br>:startmintty<br><span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">defined</span> MSYS2_NOSTART (<br>  <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">defined</span> OUTSIDE_CMD (<br>    <span class="hljs-built_in">start</span> "<span class="hljs-variable">%CONTITLE%</span>" "<span class="hljs-variable">%WD%</span>mintty" -i "/<span class="hljs-variable">%CONICON%</span>" -t "<span class="hljs-variable">%CONTITLE%</span>" "/usr/bin/<span class="hljs-variable">%LOGINSHELL%</span>" --login <span class="hljs-variable">!SHELL_ARGS!</span><br>  ) <span class="hljs-keyword">else</span> (<br>    <span class="hljs-built_in">start</span> "<span class="hljs-variable">%CONTITLE%</span>" "<span class="hljs-variable">%WD%</span>mintty" -i "/<span class="hljs-variable">%CONICON%</span>" -t "<span class="hljs-variable">%CONTITLE%</span>" "/usr/bin/<span class="hljs-variable">%LOGINSHELL%</span>" --login <span class="hljs-variable">!SHELL_ARGS!</span> -c <span class="hljs-variable">%OUTSIDE_CMD%</span><br>  )<br>) <span class="hljs-keyword">else</span> (<br>  <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">defined</span> OUTSIDE_CMD (<br>    "<span class="hljs-variable">%WD%</span>mintty" -i "/<span class="hljs-variable">%CONICON%</span>" -t "<span class="hljs-variable">%CONTITLE%</span>" "/usr/bin/<span class="hljs-variable">%LOGINSHELL%</span>" --login <span class="hljs-variable">!SHELL_ARGS!</span><br>  ) <span class="hljs-keyword">else</span> (<br>    "<span class="hljs-variable">%WD%</span>mintty" -i "/<span class="hljs-variable">%CONICON%</span>" -t "<span class="hljs-variable">%CONTITLE%</span>" "/usr/bin/<span class="hljs-variable">%LOGINSHELL%</span>" --login <span class="hljs-variable">!SHELL_ARGS!</span> -c <span class="hljs-variable">%OUTSIDE_CMD%</span><br>  )<br>)<br><span class="hljs-keyword">exit</span> /b <span class="hljs-variable">%ERRORLEVEL%</span><br><br>:startconemu<br><span class="hljs-keyword">call</span> :conemudetect || (<br>  <span class="hljs-built_in">echo</span> ConEmu <span class="hljs-keyword">not</span> found. Exiting. <span class="hljs-number">1</span>&gt;&amp;<span class="hljs-number">2</span><br>  <span class="hljs-keyword">exit</span> /b <span class="hljs-number">1</span><br>)<br><span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">defined</span> MSYS2_NOSTART (<br>  <span class="hljs-built_in">start</span> "<span class="hljs-variable">%CONTITLE%</span>" "<span class="hljs-variable">%ComEmuCommand%</span>" /Here /Icon "<span class="hljs-variable">%WD%</span>..\..\<span class="hljs-variable">%CONICON%</span>" /<span class="hljs-built_in">cmd</span> "<span class="hljs-variable">%WD%</span>\<span class="hljs-variable">%LOGINSHELL%</span>" --login <span class="hljs-variable">!SHELL_ARGS!</span><br>) <span class="hljs-keyword">else</span> (<br>  "<span class="hljs-variable">%ComEmuCommand%</span>" /Here /Icon "<span class="hljs-variable">%WD%</span>..\..\<span class="hljs-variable">%CONICON%</span>" /<span class="hljs-built_in">cmd</span> "<span class="hljs-variable">%WD%</span>\<span class="hljs-variable">%LOGINSHELL%</span>" --login <span class="hljs-variable">!SHELL_ARGS!</span><br>)<br><span class="hljs-keyword">exit</span> /b <span class="hljs-variable">%ERRORLEVEL%</span><br><br>:startsh<br><span class="hljs-built_in">set</span> MSYSCON=<br><span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">defined</span> MSYS2_NOSTART (<br>  <span class="hljs-built_in">start</span> "<span class="hljs-variable">%CONTITLE%</span>" "<span class="hljs-variable">%WD%</span>\<span class="hljs-variable">%LOGINSHELL%</span>" --login <span class="hljs-variable">!SHELL_ARGS!</span><br>) <span class="hljs-keyword">else</span> (<br>  "<span class="hljs-variable">%WD%</span>\<span class="hljs-variable">%LOGINSHELL%</span>" --login <span class="hljs-variable">!SHELL_ARGS!</span><br>)<br><span class="hljs-keyword">exit</span> /b <span class="hljs-variable">%ERRORLEVEL%</span><br><br>:EOF<br><span class="hljs-keyword">exit</span> /b <span class="hljs-number">0</span><br><br>:conemudetect<br><span class="hljs-built_in">set</span> ComEmuCommand=<br><span class="hljs-keyword">if</span> <span class="hljs-keyword">defined</span> ConEmuDir (<br>  <span class="hljs-keyword">if</span> <span class="hljs-keyword">exist</span> "<span class="hljs-variable">%ConEmuDir%</span>\ConEmu64.exe" (<br>    <span class="hljs-built_in">set</span> "ComEmuCommand=<span class="hljs-variable">%ConEmuDir%</span>\ConEmu64.exe"<br>    <span class="hljs-built_in">set</span> MSYSCON=conemu64.exe<br>  ) <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> <span class="hljs-keyword">exist</span> "<span class="hljs-variable">%ConEmuDir%</span>\ConEmu.exe" (<br>    <span class="hljs-built_in">set</span> "ComEmuCommand=<span class="hljs-variable">%ConEmuDir%</span>\ConEmu.exe"<br>    <span class="hljs-built_in">set</span> MSYSCON=conemu.exe<br>  )<br>)<br><span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">defined</span> ComEmuCommand (<br>  ConEmu64.exe /<span class="hljs-keyword">Exit</span> <span class="hljs-number">2</span>&gt;<span class="hljs-built_in">nul</span> &amp;&amp; (<br>    <span class="hljs-built_in">set</span> ComEmuCommand=ConEmu64.exe<br>    <span class="hljs-built_in">set</span> MSYSCON=conemu64.exe<br>  ) || (<br>    ConEmu.exe /<span class="hljs-keyword">Exit</span> <span class="hljs-number">2</span>&gt;<span class="hljs-built_in">nul</span> &amp;&amp; (<br>      <span class="hljs-built_in">set</span> ComEmuCommand=ConEmu.exe<br>      <span class="hljs-built_in">set</span> MSYSCON=conemu.exe<br>    )<br>  )<br>)<br><span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">defined</span> ComEmuCommand (<br>  <span class="hljs-keyword">FOR</span> /F "tokens=*" <span class="hljs-variable">%%A</span> <span class="hljs-keyword">IN</span> ('reg.exe QUERY "HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\App Paths\ConEmu64.exe" /ve <span class="hljs-number">2</span>^&gt;<span class="hljs-built_in">nul</span> ^| <span class="hljs-built_in">find</span> "REG_SZ"') <span class="hljs-keyword">DO</span> (<br>    <span class="hljs-built_in">set</span> "ComEmuCommand=<span class="hljs-variable">%%A</span>"<br>  )<br>  <span class="hljs-keyword">if</span> <span class="hljs-keyword">defined</span> ComEmuCommand (<br>    <span class="hljs-keyword">call</span> <span class="hljs-built_in">set</span> "ComEmuCommand=<span class="hljs-variable">%%C</span>omEmuCommand:*REG_SZ    =<span class="hljs-variable">%%"</span><br>    <span class="hljs-built_in">set</span> MSYSCON=conemu64.exe<br>  ) <span class="hljs-keyword">else</span> (<br>    <span class="hljs-keyword">FOR</span> /F "tokens=*" <span class="hljs-variable">%%A</span> <span class="hljs-keyword">IN</span> ('reg.exe QUERY "HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\App Paths\ConEmu.exe" /ve <span class="hljs-number">2</span>^&gt;<span class="hljs-built_in">nul</span> ^| <span class="hljs-built_in">find</span> "REG_SZ"') <span class="hljs-keyword">DO</span> (<br>      <span class="hljs-built_in">set</span> "ComEmuCommand=<span class="hljs-variable">%%A</span>"<br>    )<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">defined</span> ComEmuCommand (<br>      <span class="hljs-keyword">call</span> <span class="hljs-built_in">set</span> "ComEmuCommand=<span class="hljs-variable">%%C</span>omEmuCommand:*REG_SZ    =<span class="hljs-variable">%%"</span><br>      <span class="hljs-built_in">set</span> MSYSCON=conemu.exe<br>    )<br>  )<br>)<br><span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">defined</span> ComEmuCommand <span class="hljs-keyword">exit</span> /b <span class="hljs-number">2</span><br><span class="hljs-keyword">exit</span> /b <span class="hljs-number">0</span><br><br>:printhelp<br><span class="hljs-built_in">echo</span> Usage:<br><span class="hljs-built_in">echo</span>     %~<span class="hljs-number">1</span> [options] [login shell parameters]<br><span class="hljs-built_in">echo</span>.<br><span class="hljs-built_in">echo</span> Options:<br><span class="hljs-built_in">echo</span>     -mingw32 ^| -mingw64 ^| -ucrt64 ^| -clang64 ^| -msys[<span class="hljs-number">2</span>]   <span class="hljs-built_in">Set</span> shell <span class="hljs-built_in">type</span><br><span class="hljs-built_in">echo</span>     -defterm ^| -mintty ^| -conemu                            <span class="hljs-built_in">Set</span> terminal <span class="hljs-built_in">type</span><br><span class="hljs-built_in">echo</span>     -here                            Use current directory as working<br><span class="hljs-built_in">echo</span>                                      directory<br><span class="hljs-built_in">echo</span>     -where DIRECTORY                 Use specified DIRECTORY as working<br><span class="hljs-built_in">echo</span>                                      directory<br><span class="hljs-built_in">echo</span>     -outside_exec COMMAND            Input Outside Bash-Command<br><span class="hljs-built_in">echo</span>     -[use-]full-<span class="hljs-built_in">path</span>                 Use full current <span class="hljs-built_in">PATH</span> variable<br><span class="hljs-built_in">echo</span>                                      instead of trimming to minimal<br><span class="hljs-built_in">echo</span>     -no-<span class="hljs-built_in">start</span>                        <span class="hljs-keyword">Do</span> <span class="hljs-keyword">not</span> use "<span class="hljs-built_in">start</span>" command and<br><span class="hljs-built_in">echo</span>                                      return login shell resulting <br><span class="hljs-built_in">echo</span>                                      errorcode as this batch file <br><span class="hljs-built_in">echo</span>                                      resulting errorcode<br><span class="hljs-built_in">echo</span>     -shell SHELL                     <span class="hljs-built_in">Set</span> login shell<br><span class="hljs-built_in">echo</span>     -<span class="hljs-built_in">help</span> ^| --<span class="hljs-built_in">help</span> ^| -? ^| /?         Display this <span class="hljs-built_in">help</span> and <span class="hljs-keyword">exit</span><br><span class="hljs-built_in">echo</span>.<br><span class="hljs-built_in">echo</span> Any parameter that cannot be treated as valid option and all<br><span class="hljs-built_in">echo</span> following parameters are passed as login shell command parameters.<br><span class="hljs-built_in">echo</span>.<br><span class="hljs-keyword">exit</span> /b <span class="hljs-number">0</span><br><br>:removequotes<br><span class="hljs-keyword">FOR</span> /F "delims=" <span class="hljs-variable">%%A</span> <span class="hljs-keyword">IN</span> ('<span class="hljs-built_in">echo</span> <span class="hljs-variable">%%%</span><span class="hljs-number">1</span><span class="hljs-variable">%%'</span>) <span class="hljs-keyword">DO</span> <span class="hljs-built_in">set</span> <span class="hljs-variable">%1=%</span>%~A<br><span class="hljs-keyword">GOTO</span> :eof<br><br>:substituteparens<br><span class="hljs-built_in">SETLOCAL</span><br><span class="hljs-keyword">FOR</span> /F "delims=" <span class="hljs-variable">%%A</span> <span class="hljs-keyword">IN</span> ('<span class="hljs-built_in">echo</span> <span class="hljs-variable">%%%</span><span class="hljs-number">1</span><span class="hljs-variable">%%'</span>) <span class="hljs-keyword">DO</span> (<br>    <span class="hljs-built_in">set</span> value=<span class="hljs-variable">%%A</span><br>    <span class="hljs-built_in">set</span> value=<span class="hljs-variable">!value:^(=x!</span><br>    <span class="hljs-built_in">set</span> value=<span class="hljs-variable">!value:^)=x!</span><br>)<br><span class="hljs-built_in">ENDLOCAL</span> &amp; <span class="hljs-built_in">set</span> <span class="hljs-variable">%1=%</span>value%<br><span class="hljs-keyword">GOTO</span> :eof<br></code></pre></td></tr></table></figure><br><br></details><h3 id="将msys2添加到右键菜单上"><a href="#将msys2添加到右键菜单上" class="headerlink" title="将msys2添加到右键菜单上"></a>将msys2添加到右键菜单上</h3><ul><li>✔ 在目录下或者文件夹上执行该菜单命令时，启动msys2并定位到该目录下</li><li>✔ 在某个文件上执行该菜单命令时，启动msys2，定位到该文件所在目录，并用Vim打开该文件</li></ul><details><br>  <summary>msys2_vim_installer.bat</summary><br><br><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs bat">@<span class="hljs-built_in">echo</span> off<br>::判断是否已经获取了管理员身份<br><span class="hljs-built_in">Md</span> "<span class="hljs-variable">%WinDir%</span>\System32\test_permissions" <span class="hljs-number">2</span>&gt;<span class="hljs-built_in">NUL</span>||(<span class="hljs-built_in">Echo</span> 请使用右键管理员身份运行&amp;&amp;<span class="hljs-built_in">Pause</span> &gt;<span class="hljs-built_in">NUL</span>&amp;&amp;<span class="hljs-keyword">Exit</span>)<br><span class="hljs-built_in">Rd</span> "<span class="hljs-variable">%WinDir%</span>\System32\test_permissions" <span class="hljs-number">2</span>&gt;<span class="hljs-built_in">NUL</span><br><span class="hljs-built_in">SetLocal</span> EnableDelayedExpansion<br><br><span class="hljs-keyword">call</span> %~dp0create_depends_env.bat<br><br>::设置右键菜单项的名称<br><span class="hljs-built_in">set</span> desc="Msys2-Vim"<br>::设置搭建编译环境的BAT<br><span class="hljs-built_in">set</span> runbat="run_msys2_vim.bat"<br>::设置子路径名称<br><span class="hljs-built_in">set</span> subname="msys2_vim"<br>::去掉双引号，主要是为了兼容包含了空格的文件名或路径<br><span class="hljs-keyword">call</span> :removequotes runbat<br><span class="hljs-keyword">call</span> :removequotes subname<br><br>::添加注册表信息<br>reg add "HKEY_CLASSES_ROOT\Directory\background\shell\<span class="hljs-variable">%subname%</span>" /v "" /t REG_SZ /d <span class="hljs-variable">%desc%</span><br>reg add "HKEY_CLASSES_ROOT\Directory\background\shell\<span class="hljs-variable">%subname%</span>\command" /v ""  /t REG_EXPAND_SZ /d "\"<span class="hljs-variable">%~dp0%</span>runbat%\" \"<span class="hljs-variable">%%V</span>\"<br><br>reg add "HKEY_CURRENT_USER\Software\Classes\*\shell\<span class="hljs-variable">%subname%</span>" /v "" /t REG_SZ /d <span class="hljs-variable">%desc%</span><br>reg add "HKEY_CURRENT_USER\Software\Classes\*\shell\<span class="hljs-variable">%subname%</span>\command" /v "" /t REG_EXPAND_SZ /d "\"<span class="hljs-variable">%~dp0%</span>runbat%\" \"<span class="hljs-variable">%%V</span>\"<br><br>reg add "HKEY_CLASSES_ROOT\Directory\shell\<span class="hljs-variable">%subname%</span>" /v "" /t REG_SZ /d <span class="hljs-variable">%desc%</span><br>reg add "HKEY_CLASSES_ROOT\Directory\shell\<span class="hljs-variable">%subname%</span>\command" /v "" /t REG_EXPAND_SZ /d "\"<span class="hljs-variable">%~dp0%</span>runbat%\" \"<span class="hljs-variable">%%V</span>\"<br><br>:removequotes<br><span class="hljs-keyword">FOR</span> /F "delims=" <span class="hljs-variable">%%A</span> <span class="hljs-keyword">IN</span> ('<span class="hljs-built_in">echo</span> <span class="hljs-variable">%%%</span><span class="hljs-number">1</span><span class="hljs-variable">%%'</span>) <span class="hljs-keyword">DO</span> <span class="hljs-built_in">set</span> <span class="hljs-variable">%1=%</span>%~A<br><span class="hljs-keyword">GOTO</span> :eof<br></code></pre></td></tr></table></figure><br><br></details><details><br>  <summary>run_msys2_vim.bat</summary><br><br><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs bat">@<span class="hljs-built_in">echo</span> off<br><br><span class="hljs-keyword">call</span> %~dp0config.bat<br><br><span class="hljs-built_in">set</span> ROOT=%<span class="hljs-number">1</span><br><span class="hljs-keyword">call</span> :removequotes ROOT<br><br><span class="hljs-built_in">pushd</span> "<span class="hljs-variable">%ROOT%</span>" <span class="hljs-number">2</span>&gt;<span class="hljs-built_in">nul</span> &amp;&amp; (<span class="hljs-keyword">call</span> :folder "<span class="hljs-variable">%ROOT%</span>" &amp; <span class="hljs-built_in">popd</span>) || <span class="hljs-keyword">call</span> :file "<span class="hljs-variable">%ROOT%</span>"<br><span class="hljs-keyword">GOTO</span> :eof<br><br>:file<br><span class="hljs-keyword">call</span> :filename ROOT file_name<br><span class="hljs-keyword">call</span> :dirname ROOT dir_name<br><br><span class="hljs-built_in">set</span> command_args=<span class="hljs-variable">%msys2_type%</span> -where "<span class="hljs-variable">%dir_name%</span>"<br><span class="hljs-keyword">call</span> <span class="hljs-variable">%msys2_shell_bat%</span> <span class="hljs-variable">%command_args%</span> -outside_exec "vim '<span class="hljs-variable">%file_name%</span>'"<br><span class="hljs-keyword">GOTO</span> :eof<br><br>:folder<br><span class="hljs-built_in">set</span> command_args=<span class="hljs-variable">%msys2_type%</span> -where "<span class="hljs-variable">%ROOT%</span>"<br><span class="hljs-keyword">call</span> <span class="hljs-variable">%msys2_shell_bat%</span> <span class="hljs-variable">%command_args%</span><br><span class="hljs-keyword">GOTO</span> :eof<br><br>:removequotes<br><span class="hljs-keyword">FOR</span> /F "delims=" <span class="hljs-variable">%%A</span> <span class="hljs-keyword">IN</span> ('<span class="hljs-built_in">echo</span> <span class="hljs-variable">%%%</span><span class="hljs-number">1</span><span class="hljs-variable">%%'</span>) <span class="hljs-keyword">DO</span> <span class="hljs-built_in">set</span> <span class="hljs-variable">%1=%</span>%~A<br><span class="hljs-keyword">GOTO</span> :eof<br><br>:dirname<br><span class="hljs-keyword">FOR</span> /F "delims=" <span class="hljs-variable">%%A</span> <span class="hljs-keyword">IN</span> ('<span class="hljs-built_in">echo</span> <span class="hljs-variable">%%%</span><span class="hljs-number">1</span><span class="hljs-variable">%%'</span>) <span class="hljs-keyword">DO</span> <span class="hljs-built_in">set</span> <span class="hljs-variable">%2=%</span>%~dpA<br><span class="hljs-keyword">GOTO</span> :eof<br><br>:filename<br><span class="hljs-keyword">FOR</span> /F "delims=" <span class="hljs-variable">%%A</span> <span class="hljs-keyword">IN</span> ('<span class="hljs-built_in">echo</span> <span class="hljs-variable">%%%</span><span class="hljs-number">1</span><span class="hljs-variable">%%'</span>) <span class="hljs-keyword">DO</span> <span class="hljs-built_in">set</span> <span class="hljs-variable">%2=%</span>%~nxA<br><span class="hljs-keyword">GOTO</span> :eof<br></code></pre></td></tr></table></figure><br><br></details><p>由于本人希望，尽量少得对msys2安装目录进行修改，所以，另外提供一个脚本来关联msys2和当前脚本的关系</p><details><br>  <summary>create_depends_env.bat</summary><br><br><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs bat">@<span class="hljs-built_in">echo</span> off<br><span class="hljs-comment">REM 创建目录关联</span><br><br><span class="hljs-built_in">echo</span> 将msys2目录粘贴到这里<br><span class="hljs-built_in">set</span> /p msys2_dir=<br><br><span class="hljs-keyword">call</span> :removequotes msys2_dir<br><br><span class="hljs-built_in">set</span> msys2_shell_ex_bat=%~dp0msys2_shell_ex.<span class="hljs-built_in">cmd</span><br><span class="hljs-built_in">set</span> dest_path="<span class="hljs-variable">%msys2_dir%</span>\msys2_shell_ex.<span class="hljs-built_in">cmd</span>"<br><span class="hljs-comment"><br>@REM 自动生成config.bat</span><br><span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">exist</span> "%~dp0config.bat" (<br>    <span class="hljs-built_in">echo</span> @<span class="hljs-built_in">echo</span> off&gt;&gt; %~dp0config.bat<br>    <span class="hljs-built_in">echo</span> <span class="hljs-built_in">set</span> msys2_shell_bat="<span class="hljs-variable">%msys2_dir%</span>\msys2_shell_ex.<span class="hljs-built_in">cmd</span>"&gt;&gt; %~dp0config.bat<br>    <span class="hljs-built_in">echo</span> <span class="hljs-built_in">set</span> msys2_type=-mingw64&gt;&gt; %~dp0config.bat<br>    <span class="hljs-built_in">echo</span> <span class="hljs-built_in">set</span> pause_cmd=read -p 'Please press any key after'&gt;&gt; %~dp0config.bat<br>)<br><span class="hljs-comment"><br>REM 创建msys2_shell_ex.cmd文件链接</span><br><span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">exist</span> <span class="hljs-variable">%dest_path%</span> (mklink <span class="hljs-variable">%dest_path%</span> <span class="hljs-variable">%msys2_shell_ex_bat%</span>)<br><br>:removequotes<br><span class="hljs-keyword">FOR</span> /F "delims=" <span class="hljs-variable">%%A</span> <span class="hljs-keyword">IN</span> ('<span class="hljs-built_in">echo</span> <span class="hljs-variable">%%%</span><span class="hljs-number">1</span><span class="hljs-variable">%%'</span>) <span class="hljs-keyword">DO</span> <span class="hljs-built_in">set</span> <span class="hljs-variable">%1=%</span>%~A<br><span class="hljs-keyword">GOTO</span> :eof<br><br><span class="hljs-keyword">GOTO</span> :eof<br></code></pre></td></tr></table></figure><br><br></details><p>最终成品：<a href="/assets/2021-06-14/msys2_vim.zip">msys2_vim.zip</a></p><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul><li><a href="https://mirrors.tuna.tsinghua.edu.cn/help/msys2/" target="_blank" rel="noopener">MSYS2 镜像使用帮助</a></li><li><a href="/_posts/the_difference_between_msys2_and_cmder.html">msys2和cmder的异同</a></li><li><a href="https://unix.stackexchange.com/questions/285009/forward-aliases-to-child-process" target="_blank" rel="noopener">forward aliases to child process</a></li><li><a href="https://stackoverflow.com/questions/2752974/invoking-msys-bash-from-windows-cmd" target="_blank" rel="noopener">invoking-msys-bash-from-windows-cmd</a></li><li><a href="https://stackoverflow.com/questions/2546757/executing-msys-from-cmd-exe-with-arguments" target="_blank" rel="noopener">executing-msys-from-cmd-exe-with-arguments</a></li><li><a href="https://stackoverflow.com/questions/45836650/how-do-i-integrate-msys2-shell-into-visual-studio-code-on-window/48016561#48016561" target="_blank" rel="noopener">how-do-i-integrate-msys2-shell-into-visual-studio-code-on-window</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;由于新工作的开发需要，其服务器工程在windows下需要借助msys2上的gcc环境来进行编译并运行，因此，日常开发工作中，需要经常打开ms
      
    
    </summary>
    
    
      <category term="vim" scheme="https://yaoxuanzhi.github.io/tags/vim/"/>
    
      <category term="msy2" scheme="https://yaoxuanzhi.github.io/tags/msy2/"/>
    
  </entry>
  
  <entry>
    <title>谈一种页面加密技术</title>
    <link href="https://yaoxuanzhi.github.io/news/2021/03/15/a-way-of-html-encryption/"/>
    <id>https://yaoxuanzhi.github.io/news/2021/03/15/a-way-of-html-encryption/</id>
    <published>2021-03-15T00:00:00.000Z</published>
    <updated>2021-04-08T14:36:09.204Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>这段时间边练车边整理工作笔记，然后突然发现，有一些内容不适合直接公开分享，但是也希望发布出去，被那些想看的亲朋好友可以正常浏览，因此有了html的加密访问需求，另外，考虑到这些加密分享的内容并不适合被搜索引擎检索到它的正文，所以正文内容也是有加密需求的。于是就在网上检索有没有相关的技术实现的文章。然后找到了这些技术博客或在线工具：</p><ul><li><a href="https://blog.csdn.net/weixin_44548876/article/details/86725023" target="_blank" rel="noopener">HTML的简单页面加密代码</a><blockquote><p>基本流程上是没啥问题，但是这个示例里面，密码完整验证的方式已经被明文存储在页面上了，纵使密码存放在其它地方，采用Ajax方式获取之后再对比也毫无意义，开发者很容易在浏览器上通过F12修改这个密码验证逻辑从而正常浏览到，并且，由于这里面的内容也是明文存放着的，也会被搜索引擎检索到</p></blockquote></li><li><del><a href="http://cha.buyiju.com/tool/cryptogram.htm" target="_blank" rel="noopener">HTML网页加密解密</a></del><blockquote><p>无法正常体验，并且访问体验也不是我想要的</p></blockquote></li></ul><p>总而言之，虽然找到了各种貌似可用的实现，但是都没有get到我的需求痛点，决定自己开搞一个</p><h3 id="基本思路"><a href="#基本思路" class="headerlink" title="基本思路"></a>基本思路</h3><p>实际上，本人对访问的加密强度没啥追求，只需要以下特性即可：</p><ul><li><em>正文不能被搜索引擎爬虫到</em></li><li><em>需要输入密码访问</em></li></ul><p>针对这两个需求点，采用以下两种加密方式混合使用即可达到：</p><ul><li><strong>base64</strong> (一种可逆加密方式，将明文或字节流转换成base64字符串，在此解决首次xor加密生成的字节流存储在页面的问题)</li><li><strong>xor</strong> (一种可逆加密方式，提供密钥验证支持，在正确的密钥下，进行两次该加密即可获得原文)</li></ul><h4 id="页面加密打包思路"><a href="#页面加密打包思路" class="headerlink" title="页面加密打包思路"></a>页面加密打包思路</h4><p>读取需要加密的html文件的特定标签内容，将其进行base64+xor加密之后，塞到一个可以进行密码验证访问的模板标签上，删掉这个已加密的正文标签后，将模板标签再重新拼接成新的html。具体流程流程看代码啦，也是比较直观的</p><h4 id="页面验证访问思路"><a href="#页面验证访问思路" class="headerlink" title="页面验证访问思路"></a>页面验证访问思路</h4><p>游客打开这个加密后的html之后，已加密的标签上会显示一个密码验证的界面，如果密码输入错误，浏览器会弹框提醒，如果输入密码正确，则解密后的正文标签outHtml会直接替换掉这个密码验证标签的outHtml，此时浏览器会自动将正文内容加载出来</p><h4 id="密码验证思路"><a href="#密码验证思路" class="headerlink" title="密码验证思路"></a>密码验证思路</h4><p>核心思路是提供一个 <strong>前缀字符串(prefix_str)</strong>来作为判断依据，最终整个流程如下所示：</p><ul><li>加密打包：<code>base64(xor(prefix_str+content))</code></li><li>解密验证：<code>xor(unbase64(encode_str))</code>，再从中匹配前缀字符串是否刚好为 <strong>prefix_str</strong>，如果是，则密码正确，反之，提醒用户重新输入</li></ul><h4 id="加密-解密思路"><a href="#加密-解密思路" class="headerlink" title="加密/解密思路"></a>加密/解密思路</h4><p>从html上提取到需要加密的正文tag之后，其加密、解密的流程设计如下所示：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs text">  html encrytion                        html decrytion<br><br> +--------------+                      +--------------+<br> |              |                      |              |<br> |input html tag|                      |input html tag|<br> |              |                      |              |<br> +--------------+                      +--------------+<br>         |                                     |<br>         |                                     |<br>         |                                     |<br> +-------v--------+                  +---------v---------+<br> |                |                  |                   |<br> | xor encryption |                  | base64 encryption |<br> |                |                  |                   |<br> +----------------+                  +-------------------+<br>         |                                     |<br>         |                                     |<br>         |                                     |<br>+--------v----------+                  +-------v--------+<br>|                   |                  |                |<br>| base64 encryption |                  | xor encryption |<br>|                   |                  |                |<br>+-------------------+                  +----------------+<br>         |                                     |<br>         |                                     |<br>         |                                     |<br>  +------v--------+                     +------v--------+<br>  |               |                     |               |<br>  |output html tag|                     |output html tag|<br>  |               |                     |               |<br>  +---------------+                     +---------------+<br></code></pre></td></tr></table></figure><h4 id="技术选型"><a href="#技术选型" class="headerlink" title="技术选型"></a>技术选型</h4><p>此工具基于nodejs技术栈实现，经过对比，选择了下面这几个第三方库：</p><ul><li><a href="https://www.npmjs.com/package/js-base64" target="_blank" rel="noopener">js-base64</a><blockquote><p>utf8支持良好的base64库</p></blockquote></li><li><a href="https://www.npmjs.com/package/cheerio" target="_blank" rel="noopener">cheerio</a><blockquote><p>能够解析修改html的html库，多用于爬虫项目</p></blockquote></li><li><a href="https://www.npmjs.com/package/yargs" target="_blank" rel="noopener">yargs</a><blockquote><p>能轻松配置命令，解析多个参数，并设置快捷方式等，还能自动生成帮助菜单的命令行辅助库</p></blockquote></li></ul><h4 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h4><ul><li><a href="https://github.com/YaoXuanZhi/base64_with_xor/blob/master/js/base64_with_xor.js" target="_blank" rel="noopener">base64+xor加密解密库</a></li><li><a href="https://github.com/YaoXuanZhi/base64_with_xor/blob/master/tools/package_encrypted_html.js" target="_blank" rel="noopener">html加密打包工具</a></li></ul><h4 id="后续迭代"><a href="#后续迭代" class="headerlink" title="后续迭代"></a>后续迭代</h4><p>由于目前本人的博客都是采用hexo发布的，因此需要将这个加密逻辑整合成hexo插件，期间找到了一款同类型的插件<a href="https://github.com/D0n9X1n/hexo-blog-encrypt" target="_blank" rel="noopener">hexo-blog-encrypt</a>，这款hexo插件基本满足我最开始的要求了，但由于它是在我完成了<a href="https://github.com/YaoXuanZhi/base64_with_xor/blob/master/js/base64_with_xor.js" target="_blank" rel="noopener">base64+xor加密解密库</a>和<a href="https://github.com/YaoXuanZhi/base64_with_xor/blob/master/tools/package_encrypted_html.js" target="_blank" rel="noopener">html加密打包工具</a>后，打算整合到hexo的时候才找到的，本着不断学习的态度，借鉴这个插件的思路，自己也重写了一个 OMG，感兴趣的可前往<a href="https://github.com/YaoXuanZhi/hexo-encrypted-package-html" target="_blank" rel="noopener">hexo-encrypted-package-html</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;p&gt;这段时间边练车边整理工作笔记，然后突然发现，有一些内容不适合直接公开分享，但是也希望发布出去，被那些想看的亲朋好友可以正常浏览，因此有了ht
      
    
    </summary>
    
    
      <category term="html" scheme="https://yaoxuanzhi.github.io/tags/html/"/>
    
      <category term="encrypted" scheme="https://yaoxuanzhi.github.io/tags/encrypted/"/>
    
      <category term="hexo" scheme="https://yaoxuanzhi.github.io/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>我的断舍离实践</title>
    <link href="https://yaoxuanzhi.github.io/news/2019/09/10/simplifying-life/"/>
    <id>https://yaoxuanzhi.github.io/news/2019/09/10/simplifying-life/</id>
    <published>2019-09-10T00:00:00.000Z</published>
    <updated>2021-04-08T13:52:56.658Z</updated>
    
    <content type="html"><![CDATA[<div id="inner-encryted-page">    <head>        <script src="https://cdn.jsdelivr.net/npm/js-base64@3.6.0/base64.min.js"></script>    </head>    <style scoped>         form {            max-width: 330px;            margin-top: 17%;            --breakpoint-xs: 0;            --breakpoint-sm: 576px;            --breakpoint-md: 768px;            --breakpoint-lg: 992px;            --breakpoint-xl: 1200px;            --font-family-sans-serif: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";            --font-family-monospace: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;            text-rendering: optimizeLegibility;            line-height: 1.6em;            color: #444;            box-sizing: border-box;            margin: 0;            outline: 0;            font-weight: inherit;            font-style: inherit;            font-family: inherit;            font-size: 100%;            vertical-align: baseline;            max-width: 330px;            margin-top: 17%;            position: relative;            display: flex;            flex-direction: column;            min-width: 0;            word-wrap: break-word;            background-color: #fff;            background-clip: border-box;            border: 1px solid rgba(0, 0, 0, .125);            border-radius: .25rem;            width: 100% !important;            padding: 1.5rem !important;            margin-right: auto !important;            margin-left: auto !important;            text-align: left !important;        }        h1 {            --breakpoint-xs: 0;            --breakpoint-sm: 576px;            --breakpoint-md: 768px;            --breakpoint-lg: 992px;            --breakpoint-xl: 1200px;            --font-family-sans-serif: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";            --font-family-monospace: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;            text-rendering: optimizeLegibility;            color: #444;            word-wrap: break-word;            box-sizing: border-box;            padding: 0;            border: 0;            outline: 0;            font-style: inherit;            font-family: inherit;            vertical-align: baseline;            margin-bottom: 1rem !important;            text-align: center !important;            font-size: 2em;            line-height: 1em;            font-weight: bold;            margin: 1em 0;        }        input {            --breakpoint-xs: 0;            --breakpoint-sm: 576px;            --breakpoint-md: 768px;            --breakpoint-lg: 992px;            --breakpoint-xl: 1200px;            --font-family-sans-serif: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";            --font-family-monospace: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;            word-wrap: break-word;            box-sizing: border-box;            margin: 0;            font-family: inherit;            overflow: visible;            display: block;            width: 100%;            height: calc(1.5em + .75rem + 2px);            padding: .375rem .75rem;            font-size: 1rem;            font-weight: 400;            line-height: 1.5;            color: #495057;            background-color: #fff;            background-clip: padding-box;            border: 1px solid #ced4da;            border-radius: .25rem;            transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out;            border-top-right-radius: .25rem !important;            border-bottom-right-radius: .25rem !important;        }        button {            --breakpoint-xs: 0;            --breakpoint-sm: 576px;            --breakpoint-md: 768px;            --breakpoint-lg: 992px;            --breakpoint-xl: 1200px;            --font-family-sans-serif: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";            --font-family-monospace: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;            word-wrap: break-word;            box-sizing: border-box;            margin: 0;            font-family: inherit;            overflow: visible;            text-transform: none;            font-weight: 400;            text-align: center;            user-select: none;            border: 1px solid transparent;            transition: color .15s ease-in-out, background-color .15s ease-in-out, border-color .15s ease-in-out, box-shadow .15s ease-in-out;            color: #fff;            background-color: #007bff;            border-color: #007bff;            padding: .5rem 1rem;            font-size: 1.25rem;            line-height: 1.5;            border-radius: .3rem;            display: block;            width: 100%;            margin-top: 1rem !important;            cursor: pointer;        }     </style>    <div class="text-center h-100">        <form class="text-left mx-auto card p-4 w-100 p-2" autocomplete="off" target="hide_iframe">            <h1 class="h3 mb-3 text-center">请输入访问密码</h1>  <input type="password"                id="password" name="current-password" autocomplete="current-password"                class="form-control rounded-right input-password" spellcheck="false" autocorrect="off"                autocapitalize="off" required=""> <button class="btn btn-lg btn-primary btn-block mt-3"                onclick="checkPassword()"> 验证 </button>            <div id="encoded_text" style="display:none;">                DTI+GUgtOAsQFwAbBDUQTQQ0LRcCLXsAFgMcUwljHVQBamTliLvoqaVqaFQDThgdBDcAH0bliJroqYZURSs6CREdTU0JNFxZACUqHwsjdEgWBwQDBGwf5Ymw6KmldXhKSilo5Yil6KmiUl8HU28BTVvovo7nroHml7HnqoXmmafmnbrku5LlnYrpmavorovjgaXml4zoiZznpobmlIbnlIDjgZzkuYbkuJDkuK7lkYbvvZrmtpnmnavmhbHoppbogaPlh7jkuZrnmrkBSid4fFk4aOaXheiJr+enleaZn+S5r+emrOeVjua0huaAvOW7g++9m+aWpuivjOW2gOS8lOi+juaZh+eVvea1lemCjeevr+WMtOS7iuabieWlgO+9qeWAjeS5rOevtuWMsOebjOS7rOWRj15BAFFrbVUPRT4iS0flr77lsJPnrq9AUEwOQTlPWANqZFXlr5PlsI3nrpFKQg0cDhIiAB8NMicSADo6AQwFUk8VOElRAGpk5a+A5bCg566PdFZeQRFR5a+X5bCU56+6AUo/dEhZOGjlpY/pgorliajmloblgbbvva3mlafnuo7mmJLkuaXnpprlpLvkuJbmgorvvYTkvJDlr6vlka7moZnkvaror4bku5vohrvnhIvogLHnhZPnlI7kuY3mmoLlpb/nkY7lu4LkuYrlvaHnm6rniJnlkq7vva3lpbbpg5XliLvmlpPlgY7vvYrmiafnm6HnoKbmmbnoo4PlhJTlr63nj5/kvrLoi6Pnmr/jgLznm4XlhJbotJPor6nliojotJLku44SITvnm6rngp3mgqrvva3kvJfmmJLlvrXlvo7vvZvngqvmgrPpgaXljLzkuJ3lkabvva7mnYLorpXkuY3lvaLnm5Xmnb/niZTlsZTnlI7ku4Dkub3mnIDvvYTlp5TmrIzljq/lpaPvvbzmiZDplpXnm5Xmnb/niZTot6/loZHot4zlpazvvannmrzliabkuaPmrYPmkYLlr4bmiKLmuaTnkZfmjrTvvLHoganovo7kuYbmrJPvvanmnaTorrPlv6DmlovkuKXliL3lsZ7lu7XorrTmloDoobHnm6FraQZbQmoYXOS5jOW9s+W4meS5rOaZvuS4veensOWcquWSlui1ru+9uuaVm+S5g+iGvOW2meW4lOS5o+mdsOinruebpeeIuOS7i++8seWxo+WvlOS6queUr+e6vOaavOmdluinqeebpuS7lOS4r+adheWxvOS5nOWlgOOAv+aJs+ivr+adj+eqk+mfruS9kueXh+aCue+9ruaJv+S6nOinruaBr+ahpuaJsOiDgOWJgeaXuui+n+S7reS5h+W9i+S4neeIgeaZjeWRiOiCjemBruWJkeaIkemcveS5tuS7n+aInOS5jOWQlO+9qeWuseS7mOi+seS5ouWcue+9vOaVgOaLheWvjOOAvOW+k+S+hOi+jumGiumCi+adrOWRjOemm+igi+eIi+WasOaVhuebq+WEhOWOsu+8seS6mee6vOS5hOS5nOebsuadn+afjOWPreWJrumEr+aZgeaNiuS5oumVuOeble+8seWmv+afueimnuW/kemjsue7g+m7s+eCsOebrOiuv++9ouS4r+WOgOS6hOWxl+i/pOS6puacp+eIvuaNj+eEkeaLveaMl+epneW7juWJpOW9ruiiteWkku+9reaVr+WIjeWevuWdm+agoeS5q++9uuW+puWskOWXkuaFp++9ruaBleadueS7leeVieS5m+OAvwFKJ3h8WTho6L6x5pmN55Wx5rWL54iG5ZKg5Lm855q55paQ6Imo56es772K5Lq46LuO6L+x6Zi85L2c5baE5Y6d55u05bGg54iI5Lqn5ZKx6ZeP57yL6K+v5LiD55uyVivku7Hlkqnvva7ku6LmiLvlhpXmiKptEk1bXXoGW+Wmg+S7mOeIgeWSo+ezkOevsO+9o+WxvOS7n+S4n+iug++9qeaGleS7iOi1m+eIjOeztuevlu+9pOeznOS7oOezjuekseezn+evkQESFWlMSg17dgEGU1Llr5nlsKTnj77lor7nmrnniIzlkpbpgY/ln71HdmoJQgYCCgdsHx7lr5PlsJLnj6nlo7Xnm6HniKHlkpfpgaHln6lMUAwNME5OWHUuEwQsMxoOBx4EQ3FJVBE7I0tH5a++5bCT54+H5aOh55uq54iZ5ZKu6YGo5Z+aHwNZeCdI5a+T5bCN54+55aOr55um54iH5ZKx6YGm5Z+qbRJVVml6Awl2XFQOB07nj4Dkvrzpoo7nlJXnupo1AQXpgbnmmavmoITln73vvaTphq3lpJPmoLzlrL/lsZvlrqnorpTluqrlr5Plubnlvp/oorfliI/lpLXvvZrljofkuofmnafmlLjlsanpor7niLjmuJ7mu67lkanmoJvlrJbpm6Lnp57lvYjmnLPvvaTluJTkubrvvbzml5bkv57muZTmtKoBSjsvSG90OgFc5Lid6IKG5p+6772t55uV56GT5py05pSt572E6Kal5Luw55yE6KaB5Lm76aOg6YKK44Gv6IW65p6e5Y+q5YuKARIJPnh8WSQ/VuiRn+WdnuaVn+afmeibq+W5ge+8seebheauseiTjuWOouWNs+ibr+W5mO+9mui+seemr+ibpOW5oOe6tuS7m+ebleeph+mXieaFuuaao+i3te+9uuW4k+S5nOaaouWLiOiJsOmBrO+9vOmBoOaxteaBtuS5ouS4sOmVvO+9m+adhuWki+W5g+S5gumZpOWxsOmglOi1iOeapuW5rO+9rembheemhuWipOeAleaPnuiRu0pKJD9WaFIcBl/lpZ7lrZ7lho3kubjlhp7luavvvbrnmp3mrpzmmLjpgbLnm6bnqpfluZ3vvaPmioTmnZjov6XkuLDplbznm5PoiZTpgbTlu4PvvYTluKDkubzkuaLoiYLmjqDkv7TnlYnku5/ljZzkvbLlu6/ln7zlu5Pnm7LnupblrJjvvZrnmpDmrrbnqpfluZ3vvaPlr6Lms7DmnLTnq4TliZ/nrJ7mrp3nlrNZZzoBXGRMAwhv5oy/6ZKU5b2f5YuM57Oe6IKA772p6L6R56ab5o2q6ZOL5Lmu6Imc5Y645Yu65p2Y6Zmt77yx5Lyj5pm45Y6p5LqT5ouv5a+L5Lq66LWc5Z2K5ZGq56a955KY56G35aOI5aO85Li3772p5qCb5ayW5L+R6L+c772E5Y655LqN5o2g6ZqG5L2u44Gu5LiH5Y2U5ZWY55q5772p5Lma6L6B5Lm26ImJ5pyt6K6i772k5Lmv5bqU6K+e5bGp5Lq35Lq95pSD5ZyV5a+c5pmE5Y6R5ryY55uh5Z245pev772k5ZqC5LmU5a+J5pm85a6d6Ial6IOL5rCJ5aWU5pSfelkJIWhiXgIZUea5pOaXoeWJv+aIq+iBoOmnjuiXtu+9uuadrOaUgOaVr+WXrOWvhuWHq+axpOWQnO+9reauheWmv+WxsuiVmOS7keiGq+ijquWsteOBieWOh+mdoeesq+WQnemAo1NOPVQDb2sqH1vmlb7nu6XlhpvlrLJB5YOY54iG5YaS772d5Y+S5LuY5pWT57uk5LmG5Lut5Yaf6Zag55W+55us5bGt54iH5LqG772j55WQ5Luf5a6+5LuR5Lmf5LuR5pWw57uF5pWb5b2L5LuQ5oiX6Yav772i5oiw5LqK5p2N6Lu65piS5Liw6YGn5ZGf5LiD5Zym55uh772E5Lmb6L6v5YC45LmE5oyS6Z+k5YaS6L6J5piS5rKc6ZaL6aOP55uCSkokP1ZoUhwGX+Wvi+aXi+W7i+mUmue7qO+9iui+r+emqOe7t+WOueS6jeevg+eRqOS5sOS7tOWvl+eVpOeaueS9gueVjeaWoemWsu+9uui+veaZp+aNrOWvtueViuebqu+9vOauu+Wno+iupe+8seWBp+S5j+W7neS5jOWxueWRr+aIj+ebkuWvsuaWlOW9ruWEg++9o+ixouWkrOaXi+mXieWvv+aWoeWEteaPv+miq+aIj++9mumAl+WEr+aYtOS5uuecr+WGqG0SUQxpTEoJIWjlkaLlnILlvLvpnoPnrbvvva3kuZzkvbvlj5LkuoDlgI3kuazmjbTppJXvvYTovo7ogpXlpb3or57lvKXmlorluZnnlY7mtIbkuJDnm6Hohr3oqYbohpzorojvvYTmiYDoga3lkp7llZ/llJXnm6vvva3lvILnhIvvvLHlkYnkub3or7Tlu5Hog4rlr5LkuInms4nplozpo7bllJZTTj1UA29rKh9b5bGH57Cl55Wd6KakReW7peW7iO+9reaXqOS+guebieaPgOS8qOeVruaaguWlv+S7g+S6oOWTpOigruS5lEwaDW83AQk+eOWxueewlueVveimkOWlvuaPh+meneWSveinruS4keS5u25tIR4A6Lya5o+A5Zig772a5Lmo6ImO5Lix5L2q6Zir5bmH5LmR5a+E5ZCx6LyR57uo55uCSkokP1ZoUl8aDW83AUo7L0hvdDoBXOe/oOW2leWJr+WTreWGseS9qOeUhuacmu+9m+WOqeS6k+WAv+S5iOS7jeaWjeW5muWxoeeImeS6meebpRV0ZO+9qeaJgeiBg+WArOS7vue7sOewreaIo+W2h+iIlOWSsVNOPVQDb2sqH1sDACXliaXmjIzlmJjvvaPlrpjku5/liqPlhZHmoKnogZvoqYbvvbrljorkuq3nlb7nsJPkvZ7nm6rovJzmj4rnu57mnLTop57lho7lhJTnlb/plajnmq7jgaTlhLnnlb7lsKfluLfnm6rplp7po7fvva3mnZjmlbXlh7LlsbTluZTnu7lKSiQ/VmhSHAZf6JGs5ZyN5pSS5p+T5bud5LmM5b+Y6aKr5ZGC5oiR772k5aeg5p+y5LiW5qCj6Zil6L6A5rKc5py05ZSA5Y645Lqj5o205ZGv5oiP55uS772k6L6756aj6JGN5Z2f5pWO5p+n5ped55as5pmK6ZyJ5bm+5p2/5pSt55uM6Ka15Yeb5peb5qCmTEANOAM3WTsvSOiGj+ezkOWjj+e7kO+9ruWOgeS6leaPhueat+S5keS6puahseWstee9remYseW4gOS5see6l+S5luaJl+mWlumioOahjOebq+Wvv+aCseaWhOahte+9qeS5mui+geW6jOivi+S4uOS7jeWvkeaZsemYiuaPueebq+W9m+WJp+aWhOahte+9qemAqOWEi+WvteS6ieaJmOS5rOeIs+ebjOiWvUxADTgDN1k7L0jnqq7lvYfmjoTlu4/vva7mlYHmjbHlpbXnpqzljp3mj6/lj57jgaTkuZ7mjpTljpXvvanovpDljrnkuo3mlY3mja8lPCPkuJrnsYbnmrnvvanlhpjlsZflubXnu5rvvYTkuZvovq/ovrvnpqPmjqLlu4jvva3luqvorpPph7rnlY3lhLvniJ3niLrlrLXnm4zvvZrluJ7kubbmiJHljqfnm6vnlZTlj5rkuL3oiJHkuajpgZXlkY7lpZHli7rnj4/nlaPlmIDvva7kvKjmmZ/lr4vlh6TljqHngZLjgLznlZDohYbjgYfnlYPopqPnm4zli4nnj6/lgbDmmYHms5HploHpo7nnm5UBEgk+eHxZJD9W5b+M5Z+l5LmL5p2V772t5LmR6IiR5buH6K+L5pGJ5Lms5Lu65oiu55uMGwkBTj0GDzjvvLHmiKvogaDnmq/lrr/kv4nlr7nng7Hnm5Llv4bln6nkuZXmnYrvvaPnmpnmroXlj43lvLLmnZ/vvZvlr4XovI3ltoLvvYTlvIXnhZ7muZrmiaHovqnlnLjlsZDlibrmg47mjLrmnb7ku5HvvYrkvLDmmYrmlq3lua7mtKfopqrnvL/poIXjga7nnaroppfpoqzkubbnsJ7nm5Pog6nlr6zmmYrljJvljIXmnaHkvLvnm6pMQA04AzdZOy9I55WQ6IWZ5pmo56WS5ZiK5bCh5aOu6aq35bu05bu277yx5Y+S5LqA5pWh57u16ZWY55q96b2o5qGR5ZOk5Z+J6aq25pmO56WV5ZiJ772d5a+E5qGx6ZyH5rmS5rWH6Zyo5bmd5p2B55W+772k5biU5Lm65Y6f5LqK5p2o5pSZ57yu6Kee6aOt5qWZ55aD55uy5Yaf54+4akcOB05lXT1UA+eQu+WivOWHneWJtu+9qeWOp+S6s+imi+WHkeWliemCmOWJqeWYieacgeeauemXk+mjve+9m+WEsOWvqOS5peiJpOaRiOS5gueVl+W2i+evgeaam+WknO+9neS4sOi/uueVlOS7meS6semTh+i/pui1ve+9muWaiOashuS5o+iBs+iYvu+9rei+iOS4l+ectumjoeevgOaZqeWRkOi3luWll+WRsVRNAhlRa21RVFvkuZfku53lr4DlsKDluYvlsJbvvaTlupjor4Dkur7lr7Plr5fnrJjlnI3mloTphqLpmpHmhYnoprflkYJ0eQQLUHpTDTgD5Y6V5oma5LmE55Wu55uy5oi254Cj5p2s772k5bqY6K+A5b205LmF6ZSe5Zml55q55omu54CO5p2t772K55We5pyA54Ox54C955WA55umUl8DCG83AUoiKkhvdD5aQgcUUkPli4/lhZHnr7pHaXoXRSAkDQRTUkzli7/lhL3nr7ofRTQqFxY7a0oKCxELBCNRVAs8ZFYRISIEB1NS5Yux5YSN566WHwNZeCdI5Yu75YSk566RVE0GQlFdIQPnlIjohbTnrJ7lkYLnprvnlZDlrJjor6jlpa/pgp/mmYHmiaHnm6vli7/lhL3lt5jlhYrvvanogZvovp/lnKHkuLrmmafogqvlgLLlhq3msrvnm7Tjga3kuYvku6vmnL3kuIfmj43ltZDnm4LlgKzmsrDmmaflib/nlYDlkabnpqPlhL3lr6booqTltrTlhYrmnZjkuZ/li4nlhKrnlYPohbTlhofotYnvvaTlp6Dmn7LmnqDku7TlpYbln5rnmrnlvL3ljrTovLjkurDvvbrmrrHlp4ofDAcP44GxORISUlkA5Lic57C955uy772p5a+Q5pev5o645L+5FBkf54ip5p2955q577yx6YOG5Lif5bG35bGL5Y6K6IK15Lmd6LyV5a+h772i6IG85Lmi5pmO5Y+q5Li26L2A5a+s6KKS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            </div>            <iframe id="id_iframe" name="hide_iframe" style="display:none;"></iframe>    </div>    <script type="text/javascript">        var Base64WithXOR = {            encode: function (input) {                return Base64.encode(input);            },            decode: function (input) {                return Base64.decode(input);            },            encode_with_xor: function (input, key) {                var pwd = this.encode(key);                var xor_string = this._xor_handle(input, pwd);                return this.encode(xor_string);            },            decode_with_xor: function (input, key) {                var pwd = this.encode(key);                var decode_string = this.decode(input);                return this._xor_handle(decode_string, pwd);            },            _xor_handle: function (source, key) {                var result = "";                for (var i = 0; i < source.length; i++) {                    var source_char = source.charCodeAt(i);                    var key_idx = i % key.length;                    var xor_char_code = key.charCodeAt(key_idx) ^ source_char;                    result += String.fromCharCode(xor_char_code);                }                return result;            },        }        var CachePassword = {            cache: window.localStorage,            page_key: 'hexo-encrypted-package-html:#' + window.location.pathname,            get: function() {               var old_password = this.cache.getItem(this.page_key);                if(old_password) {                   return old_password;               }               return "";            },            set: function(new_password) {                this.cache.setItem(this.page_key, new_password);            },        }        // 自动密码验证        function autoCheckPassword() {            var old_pwd = CachePassword.get();            var handle_fun = function(page_html, decoded_ele) {                page_html.outerHTML = decoded_ele;            };            checkPasswordWrapper(old_pwd, handle_fun, null);        }        // 手动密码验证        function checkPassword() {            var pwd = document.getElementById("password").value;            var handle_fun = function(page_html, decoded_ele) {                page_html.outerHTML = decoded_ele;                CachePassword.set(pwd);            };            var error_fun = function() {                alert("密码错误，请重新输入");            };            checkPasswordWrapper(pwd, handle_fun, error_fun);        }        function checkPasswordWrapper(pwd, handle_fun, error_fun) {            var encoded_content = document.getElementById("encoded_text").innerHTML;            var decoded_ele = Base64WithXOR.decode_with_xor(encoded_content, pwd);            var full_decoded_text = decoded_ele.trim();            var prefix = "hexo-encrypted-package-html";            var decoded_text = full_decoded_text.substr(prefix.length);            if (decoded_text.length == 0 || full_decoded_text.startsWith(prefix)) {                if (typeof handle_fun === "function") {                    handle_fun(document.getElementById("inner-encryted-page"), decoded_text);                }                return true;            } else {                if (typeof error_fun === "function") {                    error_fun();                }                return false;            }        }        autoCheckPassword();    </script></div>]]></content>
    
    <summary type="html">
    
      
      
        &lt;div id=&quot;inner-encryted-page&quot;&gt;
    &lt;head&gt;
        &lt;script src=&quot;https://cdn.jsdelivr.net/npm/js-base64@3.6.0/base64.min.js&quot;&gt;&lt;/script&gt;
    
      
    
    </summary>
    
    
      <category term="life" scheme="https://yaoxuanzhi.github.io/tags/life/"/>
    
      <category term="simplify life" scheme="https://yaoxuanzhi.github.io/tags/simplify-life/"/>
    
  </entry>
  
  <entry>
    <title>不同操作系统的使用习惯备忘录</title>
    <link href="https://yaoxuanzhi.github.io/news/2019/07/24/usage-habits-of-different-operating-systems/"/>
    <id>https://yaoxuanzhi.github.io/news/2019/07/24/usage-habits-of-different-operating-systems/</id>
    <published>2019-07-24T00:00:00.000Z</published>
    <updated>2021-04-01T19:22:24.285Z</updated>
    
    <content type="html"><![CDATA[<ul><li><p>✔ Office 套件</p><ul><li>Windows：Exe、Zip、7z(官方下载地址：Windows应用商店和各种软件的官网)<blockquote><p>msys2下可以使用<code>pacman -S xxx</code></p></blockquote></li><li>Mac：Dmg、Pkg(官方软件包：App Store)</li><li>Linux(Ubuntu)：<code>apt-get install xxx</code></li><li>Linux(CentOS)：<code>yum install -g xxx</code></li></ul></li><li><p>✔ Office 套件</p><ul><li>Windows：Wps Office</li><li>Mac：Wps Office</li><li>Linux(Ubuntu)：Wps Office</li></ul></li><li><p>✔ App Package</p><ul><li>Windows：Exe、Zip、7z(官方下载地址：Windows应用商店和各种软件的官网)</li><li>Mac：Dmg、Pkg(官方软件包：App Store)，和homebrew</li><li>Linux(Ubuntu)：apt-get install xxx</li><li>Linux(CentOS)：yum install -g xxx</li></ul></li><li><p>✔ 浏览器</p><ul><li>Windows：CentBrowser、Chrome</li><li>Mac：Chrome</li><li>Ubuntu：Chrome<blockquote><p>注意，还需要搭配<code>Vimium</code>插件</p></blockquote></li></ul></li><li><p>❑ Gif录制工具：</p><ul><li>Windows：Licecap</li><li>Mac：Licecap<blockquote><p>不能全屏录制啥的，还有不能将应用程序的顶部菜单栏进行绘制</p></blockquote></li></ul></li><li><p>❑ 截图／贴图工具</p><ul><li>Windows：Snipaste</li><li>Mac：Snipaste</li></ul></li><li><p>✔ 高级编辑器：VSCode、Vim</p></li><li><p>✔ 开发工具：IdeaU(包含了Java、Python、Php、Lua、Erlang、Golang、Rust等多种语言) CLion(C++)</p><blockquote><p>注意，还需要搭配<code>ideaVim</code>插件</p></blockquote></li><li><p>✔ 热键辅助工具：</p><ul><li>Windows：AutoHotKey</li><li>Mac：AppleScript</li></ul></li><li><p>✔ 进入终端操作</p><ul><li>Mac：<strong>【Mac+Shift+ `】</strong></li><li>Windows：<strong>【Win+R】</strong>，然后输入<code>cmd</code></li><li>Linux(Utuntu)：<strong>【Ctrl+Alt+T】</strong></li></ul></li><li><p>✔ 强制关闭某个进程(ps：注意，这个要用Gif来进行演示哦)</p><ul><li>Windows:<strong>【Shift+Ctl+Esc】</strong>打开任务管理器，然后找到对应的进程关闭</li><li>Mac: 鼠标点击左上角的 <code>苹果图标</code>，然后左击打开菜单，找到 <code>强制退出</code> 菜单项进行退出</li></ul></li><li><p>✔ 在终端打开文件夹所在窗口</p><ul><li>Windows：<code>explorer .</code></li><li>Mac：<code>open .</code></li></ul></li><li><p>❑ 安装随身WiFI驱动</p><blockquote><p>包括但不限于360随身WIFI</p><ul><li>Windows：<ul><li><a href="http://wifi.360.cn/easy/pc/" target="_blank" rel="noopener">360随身WIFI官网</a></li></ul></li><li>Ubuntu：<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">sudo add-apt-repository ppa:thopiekar/mt7601<br>sudo apt-get update<br>sudo apt-get install mt7601-sta-dkms<br></code></pre></td></tr></table></figure></li></ul></blockquote><ul><li>参考资料<ul><li><a href="https://blog.csdn.net/mdjxy63/article/details/78304708/" target="_blank" rel="noopener">双系统win+ubuntu14.04使用360随身wifi 3代</a></li><li><a href="https://www.cnblogs.com/platero/p/4417458.html" target="_blank" rel="noopener">360/小米/百度 随身wifi Ubuntu下作为无线网卡使用</a></li></ul></li></ul></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ul&gt;
&lt;li&gt;&lt;p&gt;✔ Office 套件&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Windows：Exe、Zip、7z(官方下载地址：Windows应用商店和各种软件的官网)&lt;blockquote&gt;
&lt;p&gt;msys2下可以使用&lt;code&gt;pacman -S xxx&lt;/code&gt;&lt;/p&gt;

      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>我的音乐清单</title>
    <link href="https://yaoxuanzhi.github.io/news/2019/07/20/my-music-play-list/"/>
    <id>https://yaoxuanzhi.github.io/news/2019/07/20/my-music-play-list/</id>
    <published>2019-07-20T00:00:00.000Z</published>
    <updated>2021-05-06T09:50:47.754Z</updated>
    
    <content type="html"><![CDATA[<div id="inner-encryted-page">    <head>        <script src="https://cdn.jsdelivr.net/npm/js-base64@3.6.0/base64.min.js"></script>    </head>    <style scoped>         form {            max-width: 330px;            margin-top: 17%;            --breakpoint-xs: 0;            --breakpoint-sm: 576px;            --breakpoint-md: 768px;            --breakpoint-lg: 992px;            --breakpoint-xl: 1200px;            --font-family-sans-serif: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";            --font-family-monospace: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;            text-rendering: optimizeLegibility;            line-height: 1.6em;            color: #444;            box-sizing: border-box;            margin: 0;            outline: 0;            font-weight: inherit;            font-style: inherit;            font-family: inherit;            font-size: 100%;            vertical-align: baseline;            max-width: 330px;            margin-top: 17%;            position: relative;            display: flex;            flex-direction: column;            min-width: 0;            word-wrap: break-word;            background-color: #fff;            background-clip: border-box;            border: 1px solid rgba(0, 0, 0, .125);            border-radius: .25rem;            width: 100% !important;            padding: 1.5rem !important;            margin-right: auto !important;            margin-left: auto !important;            text-align: left !important;        }        h1 {            --breakpoint-xs: 0;            --breakpoint-sm: 576px;            --breakpoint-md: 768px;            --breakpoint-lg: 992px;            --breakpoint-xl: 1200px;            --font-family-sans-serif: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";            --font-family-monospace: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;            text-rendering: optimizeLegibility;            color: #444;            word-wrap: break-word;            box-sizing: border-box;            padding: 0;            border: 0;            outline: 0;            font-style: inherit;            font-family: inherit;            vertical-align: baseline;            margin-bottom: 1rem !important;            text-align: center !important;            font-size: 2em;            line-height: 1em;            font-weight: bold;            margin: 1em 0;        }        input {            --breakpoint-xs: 0;            --breakpoint-sm: 576px;            --breakpoint-md: 768px;            --breakpoint-lg: 992px;            --breakpoint-xl: 1200px;            --font-family-sans-serif: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";            --font-family-monospace: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;            word-wrap: break-word;            box-sizing: border-box;            margin: 0;            font-family: inherit;            overflow: visible;            display: block;            width: 100%;            height: calc(1.5em + .75rem + 2px);            padding: .375rem .75rem;            font-size: 1rem;            font-weight: 400;            line-height: 1.5;            color: #495057;            background-color: #fff;            background-clip: padding-box;            border: 1px solid #ced4da;            border-radius: .25rem;            transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out;            border-top-right-radius: .25rem !important;            border-bottom-right-radius: .25rem !important;        }        button {            --breakpoint-xs: 0;            --breakpoint-sm: 576px;            --breakpoint-md: 768px;            --breakpoint-lg: 992px;            --breakpoint-xl: 1200px;            --font-family-sans-serif: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";            --font-family-monospace: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;            word-wrap: break-word;            box-sizing: border-box;            margin: 0;            font-family: inherit;            overflow: visible;            text-transform: none;            font-weight: 400;            text-align: center;            user-select: none;            border: 1px solid transparent;            transition: color .15s ease-in-out, background-color .15s ease-in-out, border-color .15s ease-in-out, box-shadow .15s ease-in-out;            color: #fff;            background-color: #007bff;            border-color: #007bff;            padding: .5rem 1rem;            font-size: 1.25rem;            line-height: 1.5;            border-radius: .3rem;            display: block;            width: 100%;            margin-top: 1rem !important;            cursor: pointer;        }     </style>    <div class="text-center h-100">        <form class="text-left mx-auto card p-4 w-100 p-2" autocomplete="off" target="hide_iframe">            <h1 class="h3 mb-3 text-center">请输入访问密码</h1>  <input type="password"                id="password" name="current-password" autocomplete="current-password"                class="form-control rounded-right input-password" spellcheck="false" autocorrect="off"                autocapitalize="off" required=""> <button class="btn btn-lg btn-primary btn-block mt-3"                onclick="checkPassword()"> 验证 </button>            <div id="encoded_text" style="display:none;">                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            </div>            <iframe id="id_iframe" name="hide_iframe" style="display:none;"></iframe>    </div>    <script type="text/javascript">        var Base64WithXOR = {            encode: function (input) {                return Base64.encode(input);            },            decode: function (input) {                return Base64.decode(input);            },            encode_with_xor: function (input, key) {                var pwd = this.encode(key);                var xor_string = this._xor_handle(input, pwd);                return this.encode(xor_string);            },            decode_with_xor: function (input, key) {                var pwd = this.encode(key);                var decode_string = this.decode(input);                return this._xor_handle(decode_string, pwd);            },            _xor_handle: function (source, key) {                var result = "";                for (var i = 0; i < source.length; i++) {                    var source_char = source.charCodeAt(i);                    var key_idx = i % key.length;                    var xor_char_code = key.charCodeAt(key_idx) ^ source_char;                    result += String.fromCharCode(xor_char_code);                }                return result;            },        }        var CachePassword = {            cache: window.localStorage,            page_key: 'hexo-encrypted-package-html:#' + window.location.pathname,            get: function() {               var old_password = this.cache.getItem(this.page_key);                if(old_password) {                   return old_password;               }               return "";            },            set: function(new_password) {                this.cache.setItem(this.page_key, new_password);            },        }        // 自动密码验证        function autoCheckPassword() {            var old_pwd = CachePassword.get();            var handle_fun = function(page_html, decoded_ele) {                page_html.outerHTML = decoded_ele;            };            checkPasswordWrapper(old_pwd, handle_fun, null);        }        // 手动密码验证        function checkPassword() {            var pwd = document.getElementById("password").value;            var handle_fun = function(page_html, decoded_ele) {                page_html.outerHTML = decoded_ele;                CachePassword.set(pwd);            };            var error_fun = function() {                alert("密码错误，请重新输入");            };            checkPasswordWrapper(pwd, handle_fun, error_fun);        }        function checkPasswordWrapper(pwd, handle_fun, error_fun) {            var encoded_content = document.getElementById("encoded_text").innerHTML;            var decoded_ele = Base64WithXOR.decode_with_xor(encoded_content, pwd);            var full_decoded_text = decoded_ele.trim();            var prefix = "hexo-encrypted-package-html";            var decoded_text = full_decoded_text.substr(prefix.length);            if (decoded_text.length == 0 || full_decoded_text.startsWith(prefix)) {                if (typeof handle_fun === "function") {                    handle_fun(document.getElementById("inner-encryted-page"), decoded_text);                }                return true;            } else {                if (typeof error_fun === "function") {                    error_fun();                }                return false;            }        }        autoCheckPassword();    </script></div>]]></content>
    
    <summary type="html">
    
      
      
        &lt;div id=&quot;inner-encryted-page&quot;&gt;
    &lt;head&gt;
        &lt;script src=&quot;https://cdn.jsdelivr.net/npm/js-base64@3.6.0/base64.min.js&quot;&gt;&lt;/script&gt;
    
      
    
    </summary>
    
    
      <category term="music" scheme="https://yaoxuanzhi.github.io/tags/music/"/>
    
  </entry>
  
  <entry>
    <title>基于AutoHotKey整合自己的常用软件</title>
    <link href="https://yaoxuanzhi.github.io/news/2019/06/08/custom-protable-software-base-on-autohotkey/"/>
    <id>https://yaoxuanzhi.github.io/news/2019/06/08/custom-protable-software-base-on-autohotkey/</id>
    <published>2019-06-08T00:00:00.000Z</published>
    <updated>2021-04-01T19:07:37.114Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><a href="https://github.com/Lexikos/AutoHotkey_L/releases" target="_blank" rel="noopener">AutoHotkey_L</a></p></blockquote><h3 id="常用的Ahk函数："><a href="#常用的Ahk函数：" class="headerlink" title="常用的Ahk函数："></a>常用的Ahk函数：</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><code class="hljs ahk">;获取文件浏览器中被选中的文件路径<br>/*<br>Library for getting info from a specific explorer window (if window handle not specified, the currently active<br>window will be used).  Requires AHK_L or similar.  Works with the desktop.  Does not currently work with save<br>dialogs and such.<br><br><br>Explorer_GetSelected(hwnd="")   - paths of target window's selected items<br>Explorer_GetAll(hwnd="")        - paths of all items in the target window's folder<br>Explorer_GetPath(hwnd="")       - path of target window's folder<br><br>example:<br>F1::<br>path := Explorer_GetPath()<br>all := Explorer_GetAll()<br>sel := Explorer_GetSelected()<br>MsgBox % path<br>MsgBox % all<br>MsgBox % sel<br>return<br><br>Joshua A. Kinnison<br>2011-04-27, 16:12<br>*/<br>Explorer_GetPath(hwnd="")<br>&#123;<br>    if !(window := Explorer_GetWindow(hwnd))<br>        return ErrorLevel := "ERROR"<br>    if (window="desktop")<br>        return A_Desktop<br>    path := window.LocationURL<br>    path := RegExReplace(path, "ftp://.*@","ftp://")<br>    StringReplace, path, path, file:///<br>    StringReplace, path, path, /, \, All <br>    <br>    ; thanks to polyethene<br>    Loop<br>        If RegExMatch(path, "i)(?&lt;=%)[\da-f]&#123;1,2&#125;", hex)<br>            StringReplace, path, path, `%%hex%, % Chr("0x" . hex), All<br>        Else Break<br>    return path<br>&#125;<br>Explorer_GetAll(hwnd="")<br>&#123;<br>    return Explorer_Get(hwnd)<br>&#125;<br>Explorer_GetSelected(hwnd="")<br>&#123;<br>    return Explorer_Get(hwnd,true)<br>&#125;<br>Explorer_GetWindow(hwnd="")<br>&#123;<br>    ; thanks to jethrow for some pointers here<br>    WinGet, process, processName, % "ahk_id" hwnd := hwnd? hwnd:WinExist("A")<br>    WinGetClass class, ahk_id %hwnd%<br>    <br>    if (process!="explorer.exe")<br>        return<br>    if (class ~= "(Cabinet|Explore)WClass")<br>    &#123;<br>        for window in ComObjCreate("Shell.Application").Windows<br>            if (window.hwnd==hwnd)<br>                return window<br>    &#125;<br>    else if (class ~= "Progman|WorkerW") <br>        return "desktop" ; desktop found<br>&#125;<br>Explorer_Get(hwnd="",selection=false)<br>&#123;<br>    if !(window := Explorer_GetWindow(hwnd))<br>        return ErrorLevel := "ERROR"<br>    if (window="desktop")<br>    &#123;<br>        ControlGet, hwWindow, HWND,, SysListView321, ahk_class Progman<br>        if !hwWindow ; #D mode<br>            ControlGet, hwWindow, HWND,, SysListView321, A<br>        ControlGet, files, List, % ( selection ? "Selected":"") "Col1",,ahk_id %hwWindow%<br>        base := SubStr(A_Desktop,0,1)=="\" ? SubStr(A_Desktop,1,-1) : A_Desktop<br>        Loop, Parse, files, `n, `r<br>        &#123;<br>            path := base "\" A_LoopField<br>            IfExist %path% ; ignore special icons like Computer (at least for now)<br>                ret .= path "`n"<br>        &#125;<br>    &#125;<br>    else<br>    &#123;<br>        if selection<br>            collection := window.document.SelectedItems<br>        else<br>            collection := window.document.Folder.Items<br>        for item in collection<br>            ret .= item.path "`n"<br>    &#125;<br>    return Trim(ret,"`n")<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight ahk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs ahk"><span class="hljs-comment">; 设置窗口置顶</span><br><br><span class="hljs-comment">;激活并置顶当前窗体，直至，esc退出。</span><br><span class="hljs-symbol">#t::</span><br><span class="hljs-built_in">WinGetActiveTitle,</span> OutputVar<br><span class="hljs-built_in">WinSet,</span> AlwaysOnTop, On,%OutputVar%<br><span class="hljs-keyword">Return</span><br><br><span class="hljs-symbol">$#+t::</span><br><span class="hljs-built_in">WinSet,</span> AlwaysOnTop, Off,%OutputVar%<br><span class="hljs-keyword">Return</span><br></code></pre></td></tr></table></figure><figure class="highlight ahk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs ahk"><span class="hljs-comment">; 修改窗口透明度</span><br><span class="hljs-comment">;左侧shift+鼠标滚轮调整窗口透明度（设置30-255的透明度，低于30基本上就看不见了，如需要可自行修改）2016.09.20.by M.（2017.01.11__1635 edit again.M）</span><br><span class="hljs-comment">;</span><br><span class="hljs-comment">;使用说明：</span><br><span class="hljs-comment">;   ◆左侧shift+滚轮下滑：减少透明度，一次10</span><br><span class="hljs-comment">;   ◆左侧shift+滚轮上滑：增加透明度，一次20</span><br><span class="hljs-comment">;   ◆左侧shift+中键按下：恢复透明度至255(完全不透明).</span><br><span class="hljs-comment">;</span><br><span class="hljs-symbol">~LShift &amp; WheelUp::</span><br><span class="hljs-comment">; 透明度调整，增加。</span><br><span class="hljs-built_in">WinGet,</span> Transparent, Transparent,<span class="hljs-literal">A</span><br>If (Transparent=<span class="hljs-string">""</span>)<br>    Transparent=<span class="hljs-number">255</span><br>    <span class="hljs-comment">;Transparent_New:=Transparent+10</span><br>    Transparent_New:=Transparent+<span class="hljs-number">20</span>    <span class="hljs-comment">;◆透明度增加速度。</span><br>    If (Transparent_New &gt; <span class="hljs-number">254</span>)<br>                    Transparent_New =<span class="hljs-number">255</span><br><span class="hljs-built_in">    WinSet,</span>Transparent,%Transparent_New%,<span class="hljs-literal">A</span><br> <br><span class="hljs-symbol">    tooltip now: ▲%Transparent_New%`nmae:</span> __%Transparent%  <span class="hljs-comment">;查看当前透明度（操作之后的）。</span><br>    <span class="hljs-comment">;sleep 1500</span><br><span class="hljs-built_in">    SetTimer,</span> RemoveToolTip_transparent_Lwin__2016.<span class="hljs-number">09.20</span>, <span class="hljs-number">1500</span>  <span class="hljs-comment">;设置统一的这个格式，label在最后。</span><br><span class="hljs-keyword">return</span><br></code></pre></td></tr></table></figure><figure class="highlight ahk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs ahk"><span class="hljs-comment">; 用键盘控制鼠标方向移动</span><br><span class="hljs-comment">; 鼠标往下移动</span><br><span class="hljs-symbol">!^down::</span><br><span class="hljs-built_in">mousemove,</span><span class="hljs-number">0</span>,+<span class="hljs-number">8</span>,<span class="hljs-number">0</span>,R<br><span class="hljs-keyword">return</span><br><br><span class="hljs-comment">; 鼠标往上移动</span><br><span class="hljs-symbol">!^up::</span><br><span class="hljs-built_in">mousemove,</span><span class="hljs-number">0</span>,-<span class="hljs-number">8</span>,<span class="hljs-number">0</span>,R<br><span class="hljs-keyword">return</span><br><br><span class="hljs-comment">; 鼠标往左移动</span><br><span class="hljs-symbol">!^left::</span><br><span class="hljs-built_in">mousemove,</span>-<span class="hljs-number">8</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,R<br><span class="hljs-keyword">return</span><br><br><span class="hljs-comment">; 鼠标往右移动</span><br><span class="hljs-symbol">!^right::</span><br><span class="hljs-built_in">mousemove,</span>+<span class="hljs-number">8</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,R<br><span class="hljs-keyword">return</span><br></code></pre></td></tr></table></figure><figure class="highlight ahk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs ahk"><span class="hljs-comment">; 鼠标点击</span><br><br><span class="hljs-comment">; 鼠标左击</span><br><span class="hljs-symbol">!^h::</span><br><span class="hljs-comment">; MouseClick, left,,, 1, 0, D  ; Hold down the left mouse button.</span><br><span class="hljs-built_in">MouseGetPos,</span> x, y<br><span class="hljs-built_in">MouseClick,</span> left, %x%, %y%<br><span class="hljs-keyword">return</span><br><br><span class="hljs-comment">; 鼠标右击</span><br><span class="hljs-symbol">!^l::</span><br><span class="hljs-built_in">MouseGetPos,</span> x, y<br><span class="hljs-comment">; MouseClick, right, %x%, %y%</span><br><span class="hljs-comment">; ButtonRight</span><br><span class="hljs-comment">; MouseClick, right,,, 1, 0, D  ; Hold down the right mouse button.</span><br><span class="hljs-built_in">MouseClick,</span> right, %x%, %y%<br><span class="hljs-keyword">return</span><br></code></pre></td></tr></table></figure><hr><h3 id="文档转换类"><a href="#文档转换类" class="headerlink" title="文档转换类"></a>文档转换类</h3><p><strong>pdf -&gt; html</strong></p><blockquote><p>采用pdf2html来实现将pdf文档转换为html，好处是可以直接利用Chrome的翻译插件来辅助查看pdf文档内容，并且在分屏的时候可以少开一个pdf阅读器，直接新开一个浏览器页签就行了<br><figure class="highlight ahk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs ahk"><span class="hljs-comment">; 为pdf2htmlex添加全局快捷键执行</span><br><span class="hljs-symbol">#p::</span><br>    sel := Explorer_GetSelected()<br>    #支持外部输入页面缩放比例<br><span class="hljs-built_in">    InputBox,</span> zoom, 输入缩放倍数，如<span class="hljs-number">1.3</span><br>    Run <span class="hljs-string">"xxx\pdf2htmlEx\pdf2html.bat"</span> <span class="hljs-string">"%sel%"</span> %zoom%<br><span class="hljs-keyword">return</span><br></code></pre></td></tr></table></figure></p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># pdf2html.bat</span><br>@<span class="hljs-built_in">echo</span> off<br><span class="hljs-keyword">if</span> [%2] == [] (<span class="hljs-built_in">set</span> zoom_param=1.3) <span class="hljs-keyword">else</span> (<span class="hljs-built_in">set</span> zoom_param=%2)<br><br><span class="hljs-built_in">set</span> source_path=%1<br>call :get_out_dir %source_path%<br><span class="hljs-built_in">cd</span> /d %~dp0<br>pdf2htmlEX --zoom %zoom_param% --dest-dir %out_dir% %source_path%<br>REM  <span class="hljs-built_in">echo</span> pdf2htmlEX --zoom %zoom_param% --dest-dir %out_dir% %source_path%<br><br>pause<br>goto end<br><br>:get_out_dir<br><span class="hljs-built_in">set</span> out_dir=%~dp1<br><span class="hljs-built_in">set</span> out_dir=%out_dir:~,-1% <br>goto end<br><br>:end<br></code></pre></td></tr></table></figure><p><strong>markdown -&gt; word/pdf/html</strong></p><blockquote><p>采用<a href="https://pandoc.org/installing.html" target="_blank" rel="noopener">pandoc</a>来实现，目前官方支持多种markdown的导出格式，如：<code>word</code>、<code>pdf</code>、<code>html</code>等</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># pandoc.bat</span><br>@<span class="hljs-built_in">echo</span> off<br><br><span class="hljs-built_in">set</span> source_path=%1<br>call :get_out_dir %source_path%<br><span class="hljs-built_in">cd</span> /d %~dp0<br>pandoc -s -o <span class="hljs-string">"%out_dir%.html"</span> %source_path%<br><br>pause<br>goto end<br><br>:get_out_dir<br><span class="hljs-built_in">set</span> out_dir=%~dpn1<br>goto end<br><br>:end<br></code></pre></td></tr></table></figure><h3 id="FAQ"><a href="#FAQ" class="headerlink" title="FAQ"></a>FAQ</h3><ul><li>如何查看ahk的内置变量<ul><li><img src="/assets/2019-10-02/1570005377287.png" alt="查看ahk的内置变量"><blockquote><p>比如，<code>%A_WorkingDir%</code>为ahk.exe的工作目录</p></blockquote></li></ul></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/Lexikos/AutoHotkey_L/releases&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;AutoHotkey_L&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>一个伪Vim党的习惯养成</title>
    <link href="https://yaoxuanzhi.github.io/news/2019/05/10/VIM-mode-of-common-tools/"/>
    <id>https://yaoxuanzhi.github.io/news/2019/05/10/VIM-mode-of-common-tools/</id>
    <published>2019-05-10T00:00:00.000Z</published>
    <updated>2021-04-01T19:19:41.882Z</updated>
    
    <content type="html"><![CDATA[<h3 id="常用工具的Vim化"><a href="#常用工具的Vim化" class="headerlink" title="常用工具的Vim化"></a>常用工具的Vim化</h3><ul><li>浏览器<ul><li>Windows：CentBrowser + Vimium extension(Crx4Chrome)</li><li>Osx：Chrome + Vimium extension(Crx4Chrome)</li></ul></li><li>IDE<ul><li>Idea + IdeaVim</li><li>VS + VsVim</li></ul></li><li>Editor<ul><li>VSCode + Vim</li><li>Sublime修改配置即可<blockquote><p>在<code>Preferences -&gt; Settings</code>里如下设置：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>    <span class="hljs-attr">"ignored_packages"</span>: []<br>&#125;<br></code></pre></td></tr></table></figure></blockquote></li></ul></li></ul><hr><h3 id="常用的Vim命令："><a href="#常用的Vim命令：" class="headerlink" title="常用的Vim命令："></a>常用的Vim命令：</h3><ul><li>切换到常态：<code>Esc</code>或<code>Ctrl+O</code></li><li>显示行号：<code>:set nu</code></li><li>取消行号：<code>:set nonu</code></li><li>往下查找：<code>/word</code> 配合n或N来索引下一个匹配项</li><li>往上查找：<code>?word</code> 配合n或N来索引下一个匹配项</li><li>创建文件：<code>:new filename</code> - 打开文件：<code>:vim filepath</code></li><li>重新加载文件<code>:e!</code></li><li>保存文件并退出：<code>:wq!</code></li><li>不保存文件直接退出：<code>:q!</code></li><li>打开函数列表：<code>tb</code></li><li>切换窗口：<code>Ctrl+W</code> [j k l n]</li><li>在文件夹文件夹下查找文库本：<code>:Ag word</code></li><li>不采用插件直接自动补全：<code>Ctr+N</code> <code>Ctrl+P</code></li><li>快速输入文件名：在插入模式下，按下<code>Ctrl+X</code> <code>Ctrl+F</code></li><li>设置搜索时忽略字母的大小写差异：<code>:set ic</code></li><li>设置搜索使用字母的大小写匹配；<code>:set noic</code></li><li>搜索当前文件夹的文件：<code>;p</code>(常态下)</li><li>回到刚才编辑的文件：<code>:e#</code>(常态下)</li><li>进入块模式编辑：<code>Ctrl+v</code><ul><li>在块的前面插入字符：<code>Shift+i</code></li><li>在块的后面插入字符：<code>Shift+a</code></li></ul></li><li>假设安装了 <strong>NERD Commenter</strong> 插件，那么可以使用下列方式来进行代码注释：<ul><li>设置光标所在行的注释：<code>;cc</code></li><li>取消光标所在行的注释：<code>;cu</code></li><li>切换光标所在行的注释/非注释状态；<code>;c&lt;space&gt;</code></li></ul></li><li>切换tab<ul><li>关闭当前的tab：<code>:tabc</code></li><li>关闭所有其他的tab：<code>:tabo</code></li><li>查看所有打开的tab：<code>:tabs</code></li><li>前一个：<code>:tabp</code></li><li>后一个：<code>:tabn</code></li></ul></li><li>设置Vim的快捷键，直接在_VIMRC上插入这些语句即可：<code>map &lt;F10&gt; &lt;Esc&gt;:!explorer %:p:h&lt;CR&gt;</code></li><li>在资源管理器上显示(仅Windows)：<code>map &lt;F10&gt; &lt;Esc&gt;:!explorer /select, %:p&lt;CR&gt;</code></li><li>代码折叠<ul><li>打开关闭折叠：<code>zi</code></li><li>查看此行：<code>zv</code></li><li>关闭折叠：<code>zm</code></li><li>关闭所有：<code>zM</code></li><li>打开：<code>zr</code></li><li>打开所有：<code>zR</code></li><li>折叠当前行：<code>zc</code></li><li>打开当前折叠：<code>zo</code></li><li>删除折叠：<code>zd</code></li><li>删除所有折叠：<code>zD</code></li></ul></li><li>命令集<ul><li>替换文本所有字符串：<code>:%s/oldstr/newstr/g</code></li><li>搜索文件夹的字符串：<code>:lv /正则表达式/gj *</code>，注意需要配合<code>:lw</code>来查看搜索结果</li></ul></li><li>分割窗口调整<ul><li>纵向调整<ul><li>纵向扩大(行数增加)：<code>:ctrl+w +</code></li><li>纵向缩小(行数减少)：<code>:ctrl+w -</code> </li><li>显示行数调整为num行：<code>:res(ize) num</code></li><li>把当前窗口高度增加num行：<code>:res(ize)+num</code> </li><li>把当前窗口高度减少num行：<code>:res(ize)-num</code> </li></ul></li><li>横向调整<ul><li>指定当前窗口为num列：<code>:vertical res(ize) num</code></li><li>把当前窗口增加num列：<code>:vertical res(ize)+num</code> </li><li>把当前窗口减少num列：<code>:vertical res(ize)-num</code> </li></ul></li><li>文件浏览<ul><li>在侧边栏中打开目录树：<code>:NERDTREE</code></li><li>显示当前文件所在侧边栏：<code>:NERDTreeFind</code></li><li>打开当前文件所在目录树(窗口不分割)：<code>:Ex(plore)</code></li><li>打开当前文件所在目录树(水平分割窗口)：<code>:Se(xplore)</code></li><li>打开当前文件所在目录树(垂直分割窗口)：<code>:Ve(xplore)</code></li></ul></li></ul></li></ul><h3 id="Chrome浏览器下的Vim模式"><a href="#Chrome浏览器下的Vim模式" class="headerlink" title="Chrome浏览器下的Vim模式"></a>Chrome浏览器下的Vim模式</h3><blockquote><p>在Chrome浏览器的应用商店里安装<strong>Vimium</strong>插件即可，不过，由于众所周知的原因，如果不自建梯子是访问不了的，此时可以到<a href="https://www.crx4chrome.com/crx" target="_blank" rel="noopener">Crx4Chrome</a>上下载并安装此插件。以下罗列一些常用的快捷键操作：</p></blockquote><ul><li><p>标签页间操作</p><ul><li>跳到左侧标签页(Vimium)：<code>J(Shift+h)</code></li><li>跳到右侧标签页(Vimium)：<code>K(Shift+j)</code></li><li>跳到最左端标签页(Vimium)：<code>g0</code></li><li>跳到最右端标签页(Vimium)：<code>g$</code></li><li>查找已打开的标签页：<code>T(Shift+t)</code></li><li>关闭标签页(Vimium)：<code>x</code></li><li>跳到左侧标签页(内置)：<code>Ctrl+Shift+Tab</code></li><li>跳到右侧标签页(内置)：<code>Ctrl+Tab</code></li><li>关闭标签页(内置)：<code>Ctrl+w</code></li></ul></li><li><p>页内移动</p><ul><li>往下移动：<code>j</code></li><li>往上移动：<code>k</code></li><li>往左移动：<code>h</code></li><li>往右移动：<code>h</code></li><li>移动到顶端：<code>gg</code></li><li>移动到底端：<code>G(Shift+g)</code></li></ul></li><li><p>页内操作</p><ul><li>选择文本：<code>v</code></li><li>输入文本：<code>i</code></li><li>复制被选中文本：<code>y</code></li><li>找到当前页面的首个文本框输入：<code>gi</code></li><li>复制当前标签页链接：<code>yy</code></li><li>在本标签页内打开剪贴板上的链接：<code>p</code></li><li>新开标签页来打开剪贴板上的链接：<code>P(Shift+p)</code></li><li>打开可挑选的跳转面板：<code>f</code></li><li>在本标签页内往前跳转：<code>H(Shift+h)</code></li><li>在本标签页内往后跳转：<code>L(Shift+l)</code></li><li>在本标签页内刷新(Vimium)：<code>r</code></li><li>在本标签页内刷新(内置)：<code>F5</code></li></ul></li><li><p>页内查找</p><ul><li>查找文本(Vimium)：<code>/</code></li><li>往下查找匹配项(Vimium)：<code>n</code></li><li>往上查找匹配项(Vimium)：<code>N(Shift+n)</code></li><li>查找文本(内置)：<code>Ctrl+F</code></li></ul></li><li><p>书签/历史</p><ul><li>在本标签页来打开书签/历史的链接：<code>o</code></li><li>新开标签页来打开书签/历史的链接：<code>O(Shift+o)</code></li><li>在本标签页来打开书签的链接：<code>b</code></li><li>新开标签页来打开书签的链接：<code>B(Shift+b)</code></li></ul></li></ul><hr><h3 id="键盘控制鼠标"><a href="#键盘控制鼠标" class="headerlink" title="键盘控制鼠标"></a>键盘控制鼠标</h3><blockquote><p>目前常用的工具安装了Vim插件后，并不能控制应用里的所有东西，比如在Chrome浏览器上查看视频时，Vimium插件是无法控制视频的播放/暂停的，因此有必要提供一个键盘控制鼠标的功能，让双手停留在键盘上</p><ul><li>键盘控制鼠标移动、点击<ul><li>Windows：采用AutoHotKey可以实现，ahk如下： <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs sh">; 鼠标往下移动<br>!^down::<br>mousemove,0,+8,0,R<br><span class="hljs-built_in">return</span><br><br>; 鼠标往上移动<br>!^up::<br>mousemove,0,-8,0,R<br><span class="hljs-built_in">return</span><br><br>; 鼠标往左移动<br>!^left::<br>mousemove,-8,0,0,R<br><span class="hljs-built_in">return</span><br><br>; 鼠标往右移动<br>!^right::<br>mousemove,+8,0,0,R<br><span class="hljs-built_in">return</span><br><br>; --------------鼠标点击<br><br>; 鼠标左击<br>!^h::<br>; MouseClick, left,,, 1, 0, D  ; Hold down the left mouse button.<br>MouseGetPos, x, y<br>MouseClick, left, %x%, %y%<br><span class="hljs-built_in">return</span><br><br>; 鼠标右击<br>!^l::<br>MouseGetPos, x, y<br>; MouseClick, right, %x%, %y%<br>; ButtonRight<br>; MouseClick, right,,, 1, 0, D  ; Hold down the right mouse button.<br>MouseClick, right, %x%, %y%<br><span class="hljs-built_in">return</span><br></code></pre></td></tr></table></figure></li></ul></li></ul></blockquote><ul><li>Osx：采用ApplyScript+MouseTools可以实现： <ul><li><a href="http://www.hamsoftengineering.com/codeSharing/MouseTools/MouseTools.html" target="_blank" rel="noopener">MouseTools</a><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript"><span class="hljs-comment">-- 后续再补充了</span><br></code></pre></td></tr></table></figure></li></ul></li></ul><hr><h3 id="FAQ"><a href="#FAQ" class="headerlink" title="FAQ"></a>FAQ</h3><h5 id="在shell-vim上粘贴文本出现缩进错乱的问题"><a href="#在shell-vim上粘贴文本出现缩进错乱的问题" class="headerlink" title="在shell vim上粘贴文本出现缩进错乱的问题"></a>在shell vim上粘贴文本出现缩进错乱的问题</h5><blockquote><p>这个需要设置终端Vim的粘贴模式为粘贴保留格式：<code>:set paste</code></p></blockquote><h5 id="如何进行Vim-插件开发"><a href="#如何进行Vim-插件开发" class="headerlink" title="如何进行Vim 插件开发"></a>如何进行Vim 插件开发</h5><blockquote><p>学习<a href="https://www.w3cschool.cn/vim/gsenvozt.html" target="_blank" rel="noopener">Vimscript 文档</a></p></blockquote><h5 id="Windows下如何编译ycm-for-vim"><a href="#Windows下如何编译ycm-for-vim" class="headerlink" title="Windows下如何编译ycm for vim"></a>Windows下如何编译ycm for vim</h5><p>需要安装llvm和python以及vs，以下是ycm的编译脚本<br><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs bat">@<span class="hljs-built_in">echo</span> off<br><span class="hljs-comment">REM  配置ycm的编译环境</span><br><span class="hljs-built_in">set</span> llvm_root="D:/ProgramFiles/LLVM"<br><span class="hljs-built_in">set</span> libclang_path="D:/ProgramFiles/LLVM/lib/libclang.lib"<br><span class="hljs-comment"><br>REM  使用py2</span><br><span class="hljs-built_in">set</span> PYTHON_LIBRARY="D:/ProgramFiles/Python27/libs/python27.lib"<br><span class="hljs-built_in">set</span> PYTHON_INCLUDE_DIR="D:/ProgramFiles/Python27/include"<br><span class="hljs-comment"><br>REM  使用py3</span><br><span class="hljs-comment">REM  set USE_PYTHON2=OFF</span><br><span class="hljs-comment">REM  set PYTHON_LIBRARY="C:/Python35/libs/Python35.lib"</span><br><span class="hljs-comment">REM  set PYTHON_INCLUDE_DIR="C:/Python35/include"</span><br><span class="hljs-comment"><br>REM  配置ycm项目导出路径</span><br><span class="hljs-built_in">set</span> ycm_path="D:/GreenFolder/GvimWithYcm/vimfiles/bundle/YouCompleteMe/third_party/ycmd/cpp"<br><br><span class="hljs-built_in">mkdir</span> build &amp; <span class="hljs-built_in">cd</span> build<br>cmake -G "Visual Studio <span class="hljs-number">15</span> <span class="hljs-number">2017</span> Win64" -DEXTERNAL_LIBCLANG_PATH=<span class="hljs-variable">%libclang_path%</span> -DPATH_TO_LLVM_ROOT=<span class="hljs-variable">%llvm_root%</span>; . <span class="hljs-variable">%ycm_path%</span><br><span class="hljs-built_in">cd</span> ..<br><span class="hljs-built_in">pause</span><br></code></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;常用工具的Vim化&quot;&gt;&lt;a href=&quot;#常用工具的Vim化&quot; class=&quot;headerlink&quot; title=&quot;常用工具的Vim化&quot;&gt;&lt;/a&gt;常用工具的Vim化&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;浏览器&lt;ul&gt;
&lt;li&gt;Windows：CentBrowser + Vi
      
    
    </summary>
    
    
      <category term="ahk" scheme="https://yaoxuanzhi.github.io/tags/ahk/"/>
    
      <category term="autohotkey" scheme="https://yaoxuanzhi.github.io/tags/autohotkey/"/>
    
      <category term="vim" scheme="https://yaoxuanzhi.github.io/tags/vim/"/>
    
  </entry>
  
  <entry>
    <title>谈谈Win10系统的折腾</title>
    <link href="https://yaoxuanzhi.github.io/news/2019/05/07/about-deploy-win10-environment/"/>
    <id>https://yaoxuanzhi.github.io/news/2019/05/07/about-deploy-win10-environment/</id>
    <published>2019-05-07T00:00:00.000Z</published>
    <updated>2021-04-01T19:22:41.365Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>最近入手了台Surface Pro6，然后又重新捣弄起各种常用的开发环境了，C++、Python、Php的开发环境搞起等，不过很快就遇到了各种状况，这里特此记录下来，以前很多笔记都丢到有道云笔记上了，这里重新拾遗吧。</p></blockquote><h2 id="触摸板无法正常拖动文件和截图了"><a href="#触摸板无法正常拖动文件和截图了" class="headerlink" title="触摸板无法正常拖动文件和截图了"></a>触摸板无法正常拖动文件和截图了</h2><p>其实这个在Win 10里面是可以设置的，通过<strong>开始菜单</strong>  –&gt; <strong>设置</strong> –&gt; <strong>设备</strong> –&gt; <strong>触摸板</strong>，然后勾选 <strong>☐点击两次之后再拖动及可多选</strong> 即可，如下图所示：</p><ul><li><img src="/assets/2019-05-08/1557245985050.png" alt></li></ul><blockquote><p>另外，Win10内置的触摸板手势也可以在这个设置界面上看到哦O(∩_∩)O</p></blockquote><h2 id="无法在第三方应用上打开浏览器"><a href="#无法在第三方应用上打开浏览器" class="headerlink" title="无法在第三方应用上打开浏览器"></a>无法在第三方应用上打开浏览器</h2><blockquote><p>比如QQ、VSCode里面的url，点击之后无反应</p></blockquote><p>这是因为url的默认打开程序被设置成无效程序了，可能因为之前的程序被卸载导致的，重新指定一个即可</p><h2 id="一些应用无法正常添加到右键菜单，比如TortoiseGit、TortoiseSvn、Cmder"><a href="#一些应用无法正常添加到右键菜单，比如TortoiseGit、TortoiseSvn、Cmder" class="headerlink" title="一些应用无法正常添加到右键菜单，比如TortoiseGit、TortoiseSvn、Cmder"></a>一些应用无法正常添加到右键菜单，比如TortoiseGit、TortoiseSvn、Cmder</h2><p>一般是以下两种情况：</p><ul><li>没有以管理员身份运行，比如Cmder</li><li>没有安装与Windows 系统对应的32bit/64bit版本应用，举个例子，TortoiseGit 32bit是无法在Win10 64bit上添加上右键菜单的</li></ul><blockquote><p><del>如果是电脑小白的话，其实还有一种是被安全管家类软件拦截导致的，这里就不赘述了==!</del></p></blockquote><hr><h3 id="更改TortoiseSVN的文件比较工具"><a href="#更改TortoiseSVN的文件比较工具" class="headerlink" title="更改TortoiseSVN的文件比较工具"></a>更改TortoiseSVN的文件比较工具</h3><p>由于未知名原因，<strong>TortoiseIDiff</strong>工具无法在<code>SVN Commit对话框</code>上直接打开，因此将文本比较工具由 <strong>TortoiseIDiff</strong>更改为<code>Beyond Compare 3</code>，</p><blockquote><p>打开TortoiseSVN的Setting，选择左边的 <strong>Diff Viewer</strong>，然后设置Diff configure，如：<code>&quot;...\BComp.exe&quot; %base %mine /title1=%bname /title2=%yname /leftreadonly</code>，配置如下所示：</p><ul><li><img src="/assets/2019-05-12/1557671439648.png" alt></li></ul></blockquote><p>参考资料：</p><ul><li><a href="https://www.cnblogs.com/linlf03/p/6923519.html" target="_blank" rel="noopener">TortoiseSVN比较工具设置为BeyondCompare 4</a></li></ul><hr><h1 id="吐槽"><a href="#吐槽" class="headerlink" title="吐槽"></a>吐槽</h1><p>这个价位下的surface pro已经没啥性价比了，但是作为一枚伪软粉以及颜控党，终究充值了一波信仰（ps:真香定律无处不在啊），另外它的便捷性的确比普通笔记本好多了，作为一个后端狗，算是为自己的背包减肥了。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;最近入手了台Surface Pro6，然后又重新捣弄起各种常用的开发环境了，C++、Python、Php的开发环境搞起等，不过很快就遇到了各种状况，这里特此记录下来，以前很多笔记都丢到有道云笔记上了，这里重新拾遗吧。&lt;/p&gt;
&lt;/blockquot
      
    
    </summary>
    
    
      <category term="win10" scheme="https://yaoxuanzhi.github.io/tags/win10/"/>
    
      <category term="surface pro" scheme="https://yaoxuanzhi.github.io/tags/surface-pro/"/>
    
      <category term="吐槽" scheme="https://yaoxuanzhi.github.io/tags/%E5%90%90%E6%A7%BD/"/>
    
  </entry>
  
  <entry>
    <title>msys2和cmder的异同</title>
    <link href="https://yaoxuanzhi.github.io/news/2018/06/23/the-difference-between-msys2-and-cmder/"/>
    <id>https://yaoxuanzhi.github.io/news/2018/06/23/the-difference-between-msys2-and-cmder/</id>
    <published>2018-06-23T00:00:00.000Z</published>
    <updated>2021-06-14T08:28:47.429Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>windows下有多个可以模拟linux shell的工具，比如cmder、msys2、cygwin等等，而本人比较喜欢采用cmder和msys2，这里记录一下它俩的异同</p><h2 id="Msys2"><a href="#Msys2" class="headerlink" title="Msys2"></a>Msys2</h2><p>有关msys2的一些信息，这里就不复述了，直接在<a href="http://www.msys2.org/" target="_blank" rel="noopener">Msys2官网</a>上看吧，这里简述一下msys2的两个版本—-msys2-i686-xxx.exe和msys2-x86_64-xxx.exe，这两货的区别在于msys2-x86_64-xxx.exe集成了msys、mingw32、ming64这三个环境，而msys2-i686-xxx.exe只有msys这个独立环境，因此按照需要下载吧，如果没有什么特殊需求的话，msys2-i686-xxx.exe一般就足够了。多唠叨一句，msys2建议安装在非系统盘，它的目录占用空间增长得贼快。</p><h4 id="包管理"><a href="#包管理" class="headerlink" title="包管理"></a>包管理</h4><p>关于Msys2的内置包管理，作者采用了ArchLinux发行版里的pacman来管理包依赖，当然，这两货的用法是一样的，但是两者提供的镜像源铁定不同啦，另外msys2的pacman针对windows作了一些适配处理，当然有鉴于c/c++的各种冗杂的环境依赖所限，pacman与python的pip以及node.js的npm等同类型工具相比还是复杂了点，不过还算凑合吧。在其他的Linux发行版中，CentOS采用yum、Ubuntu采用apt-get等等</p><h5 id="常用的指令"><a href="#常用的指令" class="headerlink" title="常用的指令"></a>常用的指令</h5><ul><li><code>pacman --help</code>:查看帮助</li><li><code>pacman -Syu</code>:自动更新所有软件包</li><li><code>pacman -Sl | less -R</code>:查看所有可安装软件包</li><li><code>pacman -S package-name</code>:安装xxx软件包</li><li><code>pacman -Ss package-name</code>:查询xxx软件包的信息</li><li><code>pacman --help --query</code>:查看某条命令的可用选项</li><li><code>pacman -S make gcc gdb</code>:常用的工作配置</li><li>快速部署Vim的工作环境，可以参考<a href="https://hub.fastgit.org/YaoXuanZhi/vimrc" target="_blank" rel="noopener">自用vimrc</a></li></ul><h3 id="关联到windows右键菜单项"><a href="#关联到windows右键菜单项" class="headerlink" title="关联到windows右键菜单项"></a>关联到windows右键菜单项</h3><p>在msys32/64中创建RunMsys2.bat、RegMsys2.bat这两个文件，然后将以下内容复制过去，然后以管理员身份执行RegMsys2.bat即可。</p><details><br>  <summary>RunMsys2.bat</summary><br><br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs sh">:::::::::::::::: Msys2 Execute Version 1.0 BY 耀轩之 ::::::::::::::::<br>@<span class="hljs-built_in">echo</span> off<br><br>rem ember value of GOTO: is used to know recursion has happened.<br><span class="hljs-keyword">if</span> <span class="hljs-string">"%1"</span> == <span class="hljs-string">"GOTO:"</span> goto %2<br><br><span class="hljs-keyword">if</span> NOT <span class="hljs-string">"x%WD%"</span> == <span class="hljs-string">"x"</span> <span class="hljs-built_in">set</span> WD=<br><br>rem ember command.com only uses the first eight characters of the label.<br>goto _WindowsNT<br><br>start /min %COMSPEC% /e:4096 /c %0 GOTO: _Resume %0 %1 %2 %3 %4 %5 %6 %7 %8 %9<br>goto EOF<br><br>rem ember that we execute here <span class="hljs-keyword">if</span> we recursed.<br>:_Resume<br><span class="hljs-keyword">for</span> %%F <span class="hljs-keyword">in</span> (1 2 3) <span class="hljs-keyword">do</span> <span class="hljs-built_in">shift</span><br><span class="hljs-keyword">if</span> NOT EXIST %WD%msys-2.0.dll <span class="hljs-built_in">set</span> WD=.\usr\bin\<br><br>rem ember that we get here even <span class="hljs-keyword">in</span> command.com.<br>:_WindowsNT<br><br><span class="hljs-keyword">if</span> NOT EXIST %WD%msys-2.0.dll <span class="hljs-built_in">set</span> WD=%~dp0usr\bin\<br><br><span class="hljs-built_in">set</span> MSYSTEM=MINGW32<br>rem To activate windows native symlinks uncomment next line<br>rem <span class="hljs-built_in">set</span> MSYS=winsymlinks:nativestrict<br>rem Set debugging program <span class="hljs-keyword">for</span> errors<br>rem <span class="hljs-built_in">set</span> MSYS=error_start:%WD%../../mingw32/bin/qtcreator.exe^|-debug^|^&lt;process-id^&gt;<br><span class="hljs-built_in">set</span> MSYSCON=mintty.exe<br><span class="hljs-keyword">if</span> <span class="hljs-string">"x%1"</span> == <span class="hljs-string">"x-consolez"</span> <span class="hljs-built_in">set</span> MSYSCON=console.exe<br><span class="hljs-keyword">if</span> <span class="hljs-string">"x%1"</span> == <span class="hljs-string">"x-mintty"</span> <span class="hljs-built_in">set</span> MSYSCON=mintty.exe<br><br><span class="hljs-keyword">if</span> <span class="hljs-string">"x%MSYSCON%"</span> == <span class="hljs-string">"xmintty.exe"</span> goto startmintty<br><span class="hljs-keyword">if</span> <span class="hljs-string">"x%MSYSCON%"</span> == <span class="hljs-string">"xconsole.exe"</span> goto startconsolez<br><br>:startmintty<br><span class="hljs-keyword">if</span> NOT EXIST %WD%mintty.exe goto startsh<br><br><span class="hljs-built_in">set</span> _T=%*<br><span class="hljs-built_in">set</span> _T=%_T:<span class="hljs-string">"=%<br><br>pushd "</span>%_T%<span class="hljs-string">" 2&gt;nul &amp;&amp; (call :folder &amp; popd) || call :file<br>exit<br><br>:startconsolez<br>cd %WD%..\lib\ConsoleZ<br>start console -t "</span>MinGW<span class="hljs-string">" -r "</span>%*<span class="hljs-string">"<br>exit<br><br>:startsh<br>start %WD%sh --login -i %*<br>exit<br><br>:file<br>call :getdir %_T%<br>%WD%mintty -i %~dp0msys2.ico %~dp0usr/bin/bash --login -c "</span><span class="hljs-built_in">cd</span> <span class="hljs-string">'%_DIR%'</span> &amp;&amp; vim <span class="hljs-string">'%_T%'</span><span class="hljs-string">"<br>exit<br><br>:folder<br>%WD%mintty -i %~dp0msys2.ico %~dp0usr/bin/bash --login -c "</span><span class="hljs-built_in">cd</span> <span class="hljs-string">'%_T%'</span>;<span class="hljs-built_in">exec</span> bash<span class="hljs-string">"<br>exit<br><br>:getdir<br>::获得此文件的所在目录路径<br>set _DIR=%~dp1</span><br></code></pre></td></tr></table></figure><br><br></details><details><br>  <summary>RegMsys2.bat</summary><br><br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs sh">:::::::::::::::: Msys2 Register Version 1.0 BY 耀轩之 ::::::::::::::::<br>@<span class="hljs-built_in">echo</span> off<br>::判断是否已经获取了管理员身份<br>Md <span class="hljs-string">"%WinDir%\System32\test_permissions"</span> 2&gt;NUL||(Echo 请使用右键管理员身份运行&amp;&amp;Pause &gt;NUL&amp;&amp;Exit)<br>Rd <span class="hljs-string">"%WinDir%\System32\test_permissions"</span> 2&gt;NUL<br>SetLocal EnableDelayedExpansion<br><br>::设置右键菜单项的名称<br>@<span class="hljs-built_in">set</span> desc=<span class="hljs-string">"用Msys2打开"</span><br>::设置搭建编译环境的BAT<br>@<span class="hljs-built_in">set</span> runbat=<span class="hljs-string">"RunMsys2.bat"</span><br>::设置子路径名称<br>@<span class="hljs-built_in">set</span> subname=<span class="hljs-string">"Msys2"</span><br>::去掉双引号，主要是为了兼容包含了空格的文件名或路径<br>@<span class="hljs-built_in">set</span> <span class="hljs-string">"runbat=%runbat:"</span>=%<span class="hljs-string">"<br>@set "</span>subname=%subname:<span class="hljs-string">"=%"</span><br><br>::添加注册表信息<br>@reg add <span class="hljs-string">"HKEY_CLASSES_ROOT\Directory\background\shell\%subname%"</span> /v <span class="hljs-string">""</span> /t REG_SZ /d %desc%<br>@reg add <span class="hljs-string">"HKEY_CLASSES_ROOT\Directory\background\shell\%subname%"</span> /v <span class="hljs-string">"Icon"</span> /t REG_EXPAND_SZ /d <span class="hljs-string">"%~dp0\msys2.ico"</span><br>@reg add <span class="hljs-string">"HKEY_CLASSES_ROOT\Directory\background\shell\%subname%\command"</span> /v <span class="hljs-string">""</span>  /t REG_EXPAND_SZ /d <span class="hljs-string">"\"%~dp0%runbat%\" \"%%V\"<br><br>@reg add "</span>HKEY_CURRENT_USER\Software\Classes\*\shell\%subname%<span class="hljs-string">" /v "</span><span class="hljs-string">" /t REG_SZ /d %desc%<br>@reg add "</span>HKEY_CURRENT_USER\Software\Classes\*\shell\%subname%<span class="hljs-string">" /v "</span>Icon<span class="hljs-string">" /t REG_EXPAND_SZ /d "</span>%~dp0\msys2.ico<span class="hljs-string">"<br>@reg add "</span>HKEY_CURRENT_USER\Software\Classes\*\shell\%subname%\<span class="hljs-built_in">command</span><span class="hljs-string">" /v "</span><span class="hljs-string">" /t REG_EXPAND_SZ /d "</span>\<span class="hljs-string">"%~dp0%runbat%\" \"%%V\"<br><br>@reg add "</span>HKEY_CLASSES_ROOT\Directory\shell\%subname%<span class="hljs-string">" /v "</span><span class="hljs-string">" /t REG_SZ /d %desc%<br>@reg add "</span>HKEY_CLASSES_ROOT\Directory\shell\%subname%<span class="hljs-string">" /v "</span>Icon<span class="hljs-string">" /t REG_EXPAND_SZ /d "</span>%~dp0\msys2.ico<span class="hljs-string">"<br>@reg add "</span>HKEY_CLASSES_ROOT\Directory\shell\%subname%\<span class="hljs-built_in">command</span><span class="hljs-string">" /v "</span><span class="hljs-string">" /t REG_EXPAND_SZ /d "</span>\<span class="hljs-string">"%~dp0%runbat%\" \"%%V\"</span><br></code></pre></td></tr></table></figure><br><br></details><h3 id="FAQ"><a href="#FAQ" class="headerlink" title="FAQ"></a>FAQ</h3><h4 id="执行pacman-S-gcc后去吃个午饭，回来发现msys2的Mintty无故退出，再次执行相同指令时报错"><a href="#执行pacman-S-gcc后去吃个午饭，回来发现msys2的Mintty无故退出，再次执行相同指令时报错" class="headerlink" title="执行pacman -S gcc后去吃个午饭，回来发现msys2的Mintty无故退出，再次执行相同指令时报错"></a>执行<code>pacman -S gcc</code>后去吃个午饭，回来发现msys2的Mintty无故退出，再次执行相同指令时报错</h4><p>日志如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs log">安装gcc时遇到了这个问题<br>错误：无法初始化事务处理 (无法锁定数据库)<br>错误：无法锁定数据库：File exists<br>  如果你确认软件包管理器没有在运行，<br>  你可以删除 /var/lib/pacman/db.lck。<br></code></pre></td></tr></table></figure><p>在网上检索到了一篇<a href="https://bbs.archlinux.org/viewtopic.php?pid=1045162" target="_blank" rel="noopener">《pacman locked but /var/lib/pacman/db.lck doesn’t exist.》</a>博客，它讨论的报错和笔者遇到的报错有点相似(可惜他是遇到not exist的情况=.=)，不过这个网友遇到的问题是由于磁盘空间不足导致的，本人此时的磁盘空间充足，因此不具备参考性。后来依照提示，执行<code>rm -f /var/lib/pacman/db.lck</code>删除了db.lck，再次执行安装指令就可以正常安装了</p><hr><h2 id="Cmder"><a href="#Cmder" class="headerlink" title="Cmder"></a>Cmder</h2><p>此工具其实是一个集成包，基于ConEmu，配合各种小工具整合而成，详情请看<a href="http://cmder.net/" target="_blank" rel="noopener">Cmder官网</a></p><p>得益于ConEmu的强大，cmder也可以可以根据需要集成powershell、msys2、bash等到此工具上</p><h3 id="添加第三方软件"><a href="#添加第三方软件" class="headerlink" title="添加第三方软件"></a>添加第三方软件</h3><p>通常是修改user-profile来实现的，这里以cmake做个例子简要说明下：</p><p>在<code>cmder\config\user-profile.cmd</code>文件最底下插入<code>set path=%path%;E:/tools/cmake/bin;</code>就可以了</p><hr><h2 id="Msys2与Cmder的异同"><a href="#Msys2与Cmder的异同" class="headerlink" title="Msys2与Cmder的异同"></a>Msys2与Cmder的异同</h2><h4 id="相同之处"><a href="#相同之处" class="headerlink" title="相同之处"></a>相同之处</h4><ul><li>都是Windows下模拟linux的执行环境，两者都可以执行部分linxu指令，比如less、grep、vim、ls、bash、ssh等等</li></ul><h4 id="差异之处"><a href="#差异之处" class="headerlink" title="差异之处"></a>差异之处</h4><ul><li>Msys2的定位和Cygwin是一样的，都是将自己视为linux环境，终端程序采用了mintty(这货是putty的阉割版)，而cmder里的终端程序是ConEmu，因此还是将自己看作成windows环境，只不过兼容了部分linux的命令而已</li><li>Msys2内置了Pacman作为包管理，而cmder是没有包管理的，通常是通过修改<code>set path=%path%;xxx;</code>来添加第三方软件的支持</li><li>Cmder里的ConEmu提供了更加丰富的窗口管理功能，以及各种主题设置等等，Msys2里的Mintty只有终端功能</li><li>在Msys2中编译出来的程序必须依赖MSYS-2.0.DLL、MSYS-GCC_S-1.DLL，而Cmder是不需要的</li><li>Cmder(Conemu)在窗口最大化切换时，vim、less等工具的文本并不会重新布局，而Msys2(Mintty)是可以的</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;windows下有多个可以模拟linux shell的工具，比如cmder、msys2、cygwin等等，而本人比较喜欢采用cmder和ms
      
    
    </summary>
    
    
      <category term="msys2" scheme="https://yaoxuanzhi.github.io/tags/msys2/"/>
    
      <category term="cmder" scheme="https://yaoxuanzhi.github.io/tags/cmder/"/>
    
      <category term="linux shell" scheme="https://yaoxuanzhi.github.io/tags/linux-shell/"/>
    
  </entry>
  
</feed>
